"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="2c985a6a-1fc0-5d68-bd31-f159317c7135")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([["3806"],{341432:function(e,t,i){i.d(t,{y:()=>h,x:()=>x});var n=i(750357),a=i(281474),r=i(47249),o=i(95584),l=i(700818),s=i(952399),c=i(926941),d=i(524346),u=i(931403),m=i(892520);let _="resource_page_header--resourceHeaderAvatar--MQ4Kq",p="resource_page_header--resourceHeaderAvatarWrapper--W7Z0D",f="resource_page_header--resourceHeaderFigmaPartnerBadge--DO2Zr";function h({publishers:e,size:t=32,showFigmaPartnerBadge:i,openInNewTab:r=!1}){let h=(0,m.MA)(),x=(0,l.$2)()??void 0,b=(0,l.Pi)()??void 0,k=h?2:3;return e.length<5?(0,n.jsx)(n.Fragment,{children:e.map((e,a)=>{let l=(0,o._9)(e.profile_handle,h,x,b);return(0,n.jsxs)("div",{className:p,"data-testid":"resource-header-avatar-"+a,children:[(0,n.jsx)(c.tW,{to:l.to,trackingEventName:"resource_creator_click",trackingProperties:{profileId:e.id,target:"avatar"},target:r?"_blank":"_self",children:(0,n.jsx)(d.q,{entity:e,size:t,style:{zIndex:k-a},adtlClassName:_})},e.id),i&&(0,n.jsx)("div",{className:f,style:{zIndex:k-a},children:(0,u.R3)(e,!0)})]},e.id)})}):(0,n.jsxs)(n.Fragment,{children:[e.slice(0,3).map((e,t)=>{let r=(0,o._9)(e.profile_handle,h,x,b);return(0,n.jsxs)("div",{className:p,"data-testid":"resource-header-avatar-"+t,children:[(0,n.jsx)(a.rU,{to:r.to,onClick:e=>e.stopPropagation(),children:(0,n.jsx)(d.q,{entity:e,style:{zIndex:3-t},adtlClassName:_})},e.id),i&&(0,n.jsx)("div",{className:f,style:{zIndex:3-t},children:(0,u.R3)(e,!0)})]},e.id)}),(0,n.jsx)("div",{className:"resource_page_header--resourceHeaderAvatarWrapperExtraProfiles--SPksG resource_page_header--resourceHeaderAvatarWrapper--W7Z0D",children:(0,n.jsx)(s.q,{type:"Letter",size:"Large",letter:(e.length-3).toString()})})]})}function x({publishers:e,useSmallWidth:t=!1,removeByLabel:i=!1,openInNewTab:a=!1}){return(0,n.jsx)("span",{className:e.length>2?"resource_page_header--author--JwyKq":"resource_page_header--authorHiddenOverflow--gJwra",children:(0,r.vX)(e,t,i,a)})}},174496:function(e,t,i){i.d(t,{Si:()=>l,Ul:()=>u,_E:()=>m});var n=i(641857),a=i(389981);if(9793==i.j)var r=i(424642);var o=i(330153);function l(e){let{consumedVariable:t}=(0,o.tN)([e]);return!t||(0,r.nK)(t)||t.type!==n.M6J.CMS_ALIAS||t.resolvedType!==n.QC$.LINK?"":t.value.collectionId}function s(e){let t=(0,a.Jj)().get(e);if(!t)return null;let i=t?.getVariableConsumptionMap()?.HYPERLINK;return!i||i.isMixed||i.type!==n.M6J.CMS_ALIAS?null:i.value.fieldSchemaId}function c(e){let t=(0,a.Jj)().get(e);if(!t)return null;let i=t.prototypeInteractions.find(e=>e.event?.interactionType==="ON_CLICK");return i&&i.actions&&1===i.actions.length?i.actions[0]?.linkParam?.value?.cmsAliasValue?.fieldId??null:null}function d(e,t){let i=Object.keys(e);if(0===i.length)return null;let n=i[0];if(!n)return null;let a=t(n);return a&&i.every(e=>e===n||t(e)===a)?a:null}function u(e){return d(e,s)}function m(e){return d(e,c)}},883574:function(e,t,i){i.d(t,{j:()=>c});var n=i(853505),a=i(577851),r=i(45190),o=i(445102),l=i(10553),s=i(761050);function c(){let e=n.useMemo(()=>(0,o.k)(),[]),t=(0,a.v9)(s.kL),i=(0,r.DG)(l.bf3,{cacheNonce:e});return n.useMemo(()=>{if("loaded"===i.status){let e=i.data?.lockClient;if(e)return e.lock}return t},[i,t])}},449179:function(e,t,i){i.d(t,{$:()=>l,EN:()=>o,ri:()=>s});var n,a,r,o=9793==i.j?((n=o||{})[n.eduRestrictedSitesBanner=0]="eduRestrictedSitesBanner",n[n.TestThemeBanner=1]="TestThemeBanner",n[n.TestWarningBanner=2]="TestWarningBanner",n[n.TestOOMBanner=3]="TestOOMBanner",n[n.TestInfoBanner=4]="TestInfoBanner",n[n.StarterTeamOverFreeLimitAndLocked=5]="StarterTeamOverFreeLimitAndLocked",n[n.EduGracePeriodAccessRestricted=6]="EduGracePeriodAccessRestricted",n[n.EduGracePeriodShowReminder=7]="EduGracePeriodShowReminder",n[n.OrphanedOrgDraftsFile=8]="OrphanedOrgDraftsFile",n[n.TeamAbandonedDraftsFile=9]="TeamAbandonedDraftsFile",n[n.TeamAdminOpenInvoiceReminder=10]="TeamAdminOpenInvoiceReminder",n[n.PersonalProjectDeprecatedFile=11]="PersonalProjectDeprecatedFile",n[n.ProTeamPastDue=12]="ProTeamPastDue",n[n.ProTeamChargeFailed=13]="ProTeamChargeFailed",n[n.ProTeamNoMonthlySubEditorCountExceeded=14]="ProTeamNoMonthlySubEditorCountExceeded",n[n.ProTrialsExpiryBanner=15]="ProTrialsExpiryBanner",n[n.MultiplayerSessionUpgrade=16]="MultiplayerSessionUpgrade",n[n.AdminI18nLocalWarnBanner=17]="AdminI18nLocalWarnBanner",n[n.FigJamTryDraftsBanner=18]="FigJamTryDraftsBanner",n[n.FigJamTryClaimBanner=19]="FigJamTryClaimBanner",n[n.CommunityResourceCTANuxBanner=20]="CommunityResourceCTANuxBanner",n[n.communityM10nApprovalBanner=21]="communityM10nApprovalBanner",n[n.communityM10nFinishSetupBanner=22]="communityM10nFinishSetupBanner",n[n.communityM10nAdtlInfoNeededBanner=23]="communityM10nAdtlInfoNeededBanner",n[n.communityResourceInReviewBanner=24]="communityResourceInReviewBanner",n[n.CommunityResourceCreatorBanner=25]="CommunityResourceCreatorBanner",n[n.ExternalContentControlBanner=26]="ExternalContentControlBanner",n[n.MemoryWarningBanner=27]="MemoryWarningBanner",n[n.MemoryErrorBanner=28]="MemoryErrorBanner",n[n.MemorySafeBanner=29]="MemorySafeBanner",n[n.AdminUserDisposableDomainWarningBanner=30]="AdminUserDisposableDomainWarningBanner",n[n.FileIsTeamTemplate=31]="FileIsTeamTemplate",n[n.DowntimeBanner=32]="DowntimeBanner",n[n.FreemiumPreviewBanner=33]="FreemiumPreviewBanner",n[n.FileCreationFailureBanner=34]="FileCreationFailureBanner",n[n.DevModePaywallBanner=35]="DevModePaywallBanner",n[n.DevModeInTrialBanner=36]="DevModeInTrialBanner",n[n.devModeStarterTrialBanner=37]="devModeStarterTrialBanner",n[n.DesktopDownloadBanner=38]="DesktopDownloadBanner",n[n.BrowserDeprecationBanner=39]="BrowserDeprecationBanner",n[n.FragmentTextSearchQualityBanner=40]="FragmentTextSearchQualityBanner",n[n.Gen1DesignViewerBanner=41]="Gen1DesignViewerBanner",n[n.DesktopDeprecationBanner=42]="DesktopDeprecationBanner",n[n.LoggedOutCta=43]="LoggedOutCta",n[n.SeatBillingTermsReminder=44]="SeatBillingTermsReminder",n[n.CooperOldFileBanner=45]="CooperOldFileBanner",n[n.InteropPagesBanner=46]="InteropPagesBanner",n[n.ForceClientReload=47]="ForceClientReload",n[n.TemplatePublishingNudgeBanner=48]="TemplatePublishingNudgeBanner",n[n.DevModeDemoFileUpsellBanner=49]="DevModeDemoFileUpsellBanner",n[n.OrderFormBillingTermsBanner=50]="OrderFormBillingTermsBanner",n[n.NonAdminBillingTermsBanner=51]="NonAdminBillingTermsBanner",n[n.OrgDowngradeBanner=52]="OrgDowngradeBanner",n[n.DevModeMCPSSEDeprecationBanner=53]="DevModeMCPSSEDeprecationBanner",n[n.SlotsEnablementReload=54]="SlotsEnablementReload",n):null,l=9793==i.j?((a=l||{}).INFO="info",a.WARN="warn",a.SUCCESS="success",a.ERROR="error",a.WARN_SOFT="warn_soft",a.CONFIDENTIALITY="confidentiality",a.BRAND_STRONG="brand_strong",a.DANGER="danger",a.INFO_SOFT="info_soft",a.FPL_DEFAULT="fpl_default",a.FPL_DANGER="fpl_danger",a.FPL_BRAND="fpl_brand",a.FPL_SUCCESS="fpl_success",a.FPL_WARN="fpl_warn",a):null,s=9793==i.j?((r=s||{}).STRUCTURED="structured",r.CUSTOM="custom",r):null},169080:function(e,t,i){i.d(t,{P:()=>G});var n=i(750357),a=i(853505),r=i(577851),o=i(311019),l=i(193447),s=i(60476),c=i(698370),d=i(254493),u=i(102837),m=i(444947),_=i(202410),p=i(45190),f=i(445102),h=i(484299),x=i(259946),b=i(558089),k=i(232656),w=i(590914),v=i(491420),g=i(228058),j=i(469271),y=i(516670),C=i(695038),T=i(964596),N=i(242802),A=i(10553),B=i(300413),I=i(762829),D=i(256937),P=i(627325),R=i(168669),E=i(436048),F=i(956887),M=i(265490),S=i(295604),O=i(644078);let L="quick_reply_thread_view--column--Evc1A",U="quick_reply_thread_view--fileName--225fg",q="quick_reply_thread_view--headerButton--jr1xT",H=new class{get file(){throw Error("Data should not be accessed directly from quick replies, we need to create standard API for comments to use this view. see: file_comments_api.tsx")}get fileFollower(){throw Error("Data should not be accessed directly from quick replies, we need to create standard API for comments to use this view. see: file_comments_api.tsx")}get comments(){throw Error("Data should not be accessed directly from quick replies, we need to create standard API for comments to use this view. see: file_comments_api.tsx")}},V=null,G=(0,a.forwardRef)((e,t)=>{let i=(0,p.DG)(A.OUS,{fileKey:e.quickReplyInfo.fileKey,rootId:e.quickReplyInfo.threadId});return(0,n.jsx)("div",{className:"quick_reply_thread_view--container--pZmxx",ref:t,children:(0,n.jsxs)("div",{className:L,children:[(0,n.jsxs)("div",{className:"quick_reply_thread_view--header--I3Cf9",children:[(0,n.jsx)("div",{className:q,children:!e.fileBrowser&&(0,n.jsx)(k.S,{"aria-label":(0,w.t)("quick_reply.navigate_back"),onClick:e.onClose,children:(0,n.jsx)(s.C,{})})}),e.fileBrowser?(0,n.jsx)("div",{className:U,children:"loaded"===i.status&&i.data.file&&i.data.file.name}):(0,n.jsx)("h2",{className:U,children:"loaded"===i.status&&i.data.file&&i.data.file.name}),(0,n.jsx)("div",{className:q,children:e.fileBrowser?(0,n.jsx)(k.S,{"aria-label":(0,w.t)("quick_reply.close"),onClick:e.onClose,children:(0,n.jsx)(c.t,{})}):(0,n.jsx)("div",{style:{display:"none"},children:(0,n.jsx)(k.S,{"aria-label":(0,w.t)("quick_reply.more"),children:(0,n.jsx)(d.O,{})})})})]}),(0,n.jsx)(Z,{quickReplyInfo:e.quickReplyInfo,result:i,inFileBrowser:e.fileBrowser})]})})});function Z(e){let t=(0,N.xJ)();return t?"loading"===e.result.status||"disabled"===e.result.status?(0,n.jsx)(x.jz,{size:"medium"}):"errors"===e.result.status||null==e.result.data.file?(0,n.jsx)("div",{className:"quick_reply_thread_view--errorState--pWWqa",children:(0,w.t)("quick_reply.unable_to_load_thread")}):(0,n.jsx)(W,{quickReplyInfo:e.quickReplyInfo,result:e.result,user:t,inFileBrowser:e.inFileBrowser}):null}function W(e){let{quickReplyInfo:t,result:i,user:l}=e,{fileKey:s,threadId:c}=t,d=(0,C.oK)({args:{fileKey:s,rootId:c},subscription:i}),p=(0,r.I0)(),{file:f}=i.data,x=(0,a.useMemo)(()=>(0,B.$g)({currentOrgId:f.parentOrgId,teamId:f.teamId,fileKey:s,users:[]}),[f.parentOrgId,f.teamId,s]),{mobileCommentThread:b}=f,{currentUserCommentReadStatus:v}=f,j=b.find(e=>e.id===c),N=a.useMemo(()=>b.reduce((e,t)=>t.createdAt.getTime()>e.createdAt.getTime()?t:e).thumbnailUrl,[b]),A=(0,r.v9)(e=>e.comments.savingCommentUuids),D=(0,r.v9)(e=>e.comments.lgPendingUuidToServerIdMap);if(!j)return(0,n.jsx)("div",{children:(0,w.t)("quick_reply.unable_to_load_thread")});let P=b.map(e=>(0,T.NO)(l.id,j,e,v??T.fh,A,D,e.attachments)),R={id:j.id,key:s,anchored:!1,canvasPosition:null,selectionAnchorCanvasPosition:null,comments:P,messageMeta:P[0].message_meta,page:j.clientMeta?.pageId||null,isActive:!0,replyCount:b.length-1,isCanvasMention:!1,pageName:j.clientMeta?.pageId||null,sidebarItemType:I.hL.COMMENT_THREAD},E={api:d,status:i.status,data:H,threads:{status:i.status,data:[R],errors:i.errors},errors:i.errors,isResolvedLoaded:!0,isUnresolvedLoaded:!0};return(0,n.jsx)(y.x8,{value:E,children:(0,n.jsxs)("div",{className:"quick_reply_thread_view--mouseContainer--Tos1G",onMouseEnter:()=>{let e=P.some(e=>e.isUnread);V=setTimeout(()=>{d.commentReceipts&&e&&(p(g.rR({receiptsAPI:d.commentReceipts,thread:R})),(0,m.L9)("Comment Thread Read",{commentThreadId:c,threadType:"file_browser_quick_reply"}))},1e3)},onMouseLeave:()=>{V&&clearTimeout(V)},children:[(0,n.jsxs)("div",{className:"quick_reply_thread_view--preview--kuEIe",children:[(0,n.jsx)(_.R,{children:(0,n.jsx)(h.oG,{src:N||void 0,className:"quick_reply_thread_view--previewImage--3Na97",style:{backgroundColor:(0,o.fileBackgroundColor)(f.checkpointClientMeta)},alt:"thumbnail"})}),(0,n.jsx)("div",{className:"quick_reply_thread_view--openFileButton--0A7-V",children:(0,n.jsx)(k.S,{"aria-label":(0,w.t)("quick_reply.open_file"),onClick:()=>{let e=t.deeplink??`/file/${s}?fuid=${l.id}&#${c}`;window.location.href=e},children:(0,n.jsx)(u.M,{})})})]}),(0,n.jsx)(z,{loadedComments:P,user:l,quickReplyInfo:t,commentMentionables:x,inFileBrowser:e.inFileBrowser})]})})}function z(e){let{loadedComments:t,user:i,quickReplyInfo:o,commentMentionables:s,inFileBrowser:c}=e,{fileKey:d,threadId:u}=o,m=(0,r.I0)();(0,a.useEffect)(()=>{m(g.Iv({threadId:u}))},[m,u]);let _=(0,r.v9)(e=>e.comments.typeahead),p=(0,r.v9)(e=>e.comments.editingComment),h=(0,r.v9)(e=>e.comments.activeThread?.id),x=(0,r.v9)(e=>e.comments.threads),k=h&&x[h]||null,C=k?.reply.messageMeta||[],{submitReply:T,updateMessage:N,submitEdit:A}=function(e){let t=(0,r.I0)(),i=(0,y.Wj)().writeAPI,n=(0,y.O7)()?.threads,o=a.useCallback(e=>{if(!i)return void console.error("Calling submitReply with no write API");n&&"loaded"===n.status&&n.data.find(t=>t.id===e.threadId)&&(e.onCommentValidationFailure=(n,a,r,o)=>g.ei(i,t,n,a,r,o,e.uuid,S.V),t(g.Xi({...e,commentsWriteApi:i,commentsConfiguration:S.V,trackingContext:{feature:"web_quick_reply_screen"}})))},[t,n,i]);return{submitReply:o,updateMessage:a.useCallback(i=>{t(g.pp({threadId:e,messageMeta:i}))},[t,e]),submitEdit:a.useCallback((e,i)=>{t(g.cC({comment:e,messageMeta:i}))},[t])}}(u),B=(0,P.ji)(),U=a.useRef(null),q=a.useRef(null),H=a.useRef(null),[V,G]=a.useState(null),[Z,W]=a.useState(a.useRef(null)),z=a.useRef(null),X=0,K=0,J=0;z.current&&z.current.offsetParent&&(X=z.current.offsetWidth,K=z.current.offsetLeft,J=z.current.offsetParent.clientHeight-z.current.offsetTop);let Y=e=>e||{x:0,y:0},$=a.useRef(null);(0,a.useEffect)(()=>{$.current&&$.current.scrollToBottom()},[]);let Q=(0,a.useCallback)(e=>{m((0,j.K4)({type:M.f,data:{comment:e,onConfirm:()=>{m(g.d0({comment:e}))}}}))},[m]),ee=[...new Set(t.map(e=>e.user.handle))],et=t.find(e=>e.id===u);return et?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{style:v.sx.flex1.$}),(0,n.jsx)(b.l,{className:"quick_reply_thread_view--bottomAnchoredScrollContainer--D5Hw3",useBottomPinning:!0,ref:$,enableScrollShadow:!0,children:(0,n.jsx)("div",{className:L,children:t.slice().map((e,a)=>(0,n.jsx)(R.n,{allowAttachments:!1,comment:e,dispatch:m,editingComment:p,editorOnClear:B.editorOnClear,editorOnInsert:B.editorOnInsert,editorRef:H,editorType:"comment-editor-thread",hideEmojiPicker:!1,hideReactions:!1,hideResolve:!1,hyperlinkLocation:V,index:a,isQuickReplyThreadView:!0,mentionables:s,mountInputFocused:!0,onDelete:Q,overflowMenuActions:c?[]:void 0,prevAuthor:0===a?null:t[a-1].user_id,setHyperlinkEditorRef:W,setHyperlinkLocation:G,setIsEditorFocused:l.ZT,setResolved:l.ZT,showEditedIndicator:!!e.edited_at,submitEdit:A,thread:{comments:t,key:d,id:u},threadPosition:{x:0,y:0},typeahead:_,user:i,viewportPositionFromClientPosition:Y},`thread-comment-${e.id}`))})}),(0,n.jsx)(E.M,{allowAttachments:!1,authorNames:ee,className:O.Ip,dispatch:m,editingExistingComment:!1,editorOnClear:B.editorOnInsert,editorOnInsert:B.editorOnClear,editorRef:q,editorType:"comment-editor-reply",fileKey:d,hideEmojiPicker:!1,hyperlinkLocation:V,isDisabled:!1,isEmojiPickerDisabled:null!==p,mentionables:s,messageMeta:C,mountInputFocused:e.inFileBrowser??!1,onCancel:l.ZT,onComposeFocus:void 0,onSubmit:()=>{T({threadId:u,threadUuid:et.uuid||void 0,uuid:(0,f.k)()})},placeholderText:(0,w.t)("comments.reply"),recordingKey:I.PH.quickReply,replyContainerRef:z,setHyperlinkEditorRef:W,setHyperlinkLocation:G,setIsEditorFocused:l.ZT,submitText:(0,w.t)("comments.reply"),threadId:u,threadPosition:null,typeahead:_,updateMessage:N,user:i,viewportPositionFromClientPosition:Y}),(0,n.jsx)(D.ge,{decoratorsRef:U,onClear:B.onClear,onInsert:B.onInsert,width:X,direction:F.Vk.UPWARDS,positionFromBottom:{left:K,bottom:J}})]}):null}},821527:function(e,t,i){i.d(t,{FX:()=>_,GX:()=>d,Gk:()=>u,I5:()=>r,IQ:()=>o,Ue:()=>a,Zc:()=>m,Ze:()=>n,jI:()=>l,ss:()=>s,x1:()=>c});let n="new-design-file-button",a="new-figjam-file-button",r="new-slides-file-button",o="new-sites-file-button",l="new-cooper-file-button",s="new-figmake-file-button",c="search-input",d="recent-file-row",u="search-result",m="see-all-search-results",_="browse-more"},944279:function(e,t,i){i.d(t,{VH:()=>s,XU:()=>l,jv:()=>o});var n,a,r,o=9793==i.j?((n=o||{})[n.FEATURE_DISABLED=0]="FEATURE_DISABLED",n[n.READ_ONLY_FILE=1]="READ_ONLY_FILE",n):null,l=9793==i.j?((a=l||{})[a.MOBILE_NATIVE_NAVBAR=0]="MOBILE_NATIVE_NAVBAR",a):null,s=9793==i.j?((r=s||{})[r.BEGAN=0]="BEGAN",r[r.MOVED=1]="MOVED",r[r.ENDED=2]="ENDED",r[r.CANCELLED=3]="CANCELLED",r[r.MOVED_COALESCED=4]="MOVED_COALESCED",r):null},232656:function(e,t,i){i.d(t,{S:()=>o});var n=i(750357),a=i(853505),r=i(403706);let o=a.forwardRef(function({children:e,...t},i){return(0,n.jsx)(r.h,{...t,ref:i,className:"icon_button_32--iconButton--E0ZHG",children:(0,n.jsx)("span",{"aria-hidden":!0,className:"icon_button_32--icon---5uYV",children:e})})})},213806:function(e,t,i){i.d(t,{w:()=>r});var n=i(853505),a=i(193447);let r=n.createContext({onClick:()=>!1,toggleQuickReply:a.ZT,onMouseMove:a.ZT,onRemove:a.ZT,inDesktopTray:!1})},351201:function(e,t,i){i.d(t,{wm:()=>eQ,zN:()=>e0,c1:()=>n,WL:()=>eY,OL:()=>e$});var n,a=i(750357),r=i(853505),o=i(577851),l=i(870102),s=i(301021),c=i(202066),d=i(361949),u=i(403706),m=i(53022),_=i.n(m),p=i(661897),f=i(880987),h=i(458780),x=i(991613),b=i(689342),k=i(681768),w=i(558089),v=i(590914),g=i(1093),j=i(453393),y=i(404639),C=i(70523),T=i(260251),N=i(62261),A=i(416792),B=i(764162),I=i(956964),D=i(242802),P=i(998324),R=i(218669),E=i(773103),F=i(7731),M=i(337),S=i(5929),O=i(309374),L=i(35896),U=i(410802),q=i(613501),H=i(501390),V=i.n(H),G=i(472922),Z=i(574059),W=i(44332),z=i(733791),X=i(842600),K=i(659461),J=i(260016),Y=i(5794),$=i(742420),Q=i(213806),ee=i(337341);let et="block_kit_row--rowContainer--e1-Q6",ei="block_kit_row--rowWidth--UCvuX",en="block_kit_row--metadataContainer--vz-3r",ea="block_kit_row--usersContainerStructuredView--Cu-gt",er="block_kit_row--quickReplyChevronContainerBase---hFMz",eo="block_kit_row--quickReplyChevronContainerDesktop--mircq block_kit_row--quickReplyChevronContainerBase---hFMz",el="block_kit_row--imagePreview--UQE30";function es(e){return`notification-${e.notification_id}`}function ec(e){return(0,a.jsx)("span",{className:"block_kit_row--htmlTextBlock--tGKuu",dangerouslySetInnerHTML:{__html:V().sanitize(e.block.html_text)}})}function ed(e){let t=(0,G.WG)(e.block.emoji_shortcode)[0];return t.meta?(0,a.jsx)("span",{className:"block_kit_row--emojiUnicode--eXGLS",children:t.unicode}):(0,a.jsx)(a.Fragment,{})}function eu(e){return e?e.map((e,t)=>"HtmlTextBlock"===e._block_type?(0,a.jsx)(ec,{block:e},t):(0,a.jsx)(ed,{block:e},t)):[]}function em(e){let{block:t,size:i}=e;return(0,a.jsx)(Y.Kn,{entity:{...t,id:t.entity_id},size:i,hideFallbackInitial:!1,shape:t.shape.toUpperCase()})}function e_(e){let{block:t}=e;return(0,a.jsx)("div",{className:`${el} thumbnail_DEPRECATED--tileThumbnail--NKIj6`,style:{background:`url(${(0,J.Z)()})`},children:(0,a.jsx)("div",{className:"thumbnail_DEPRECATED--thumbnailContainer--OtJbl",style:{backgroundColor:(e=>{if(!e||0===e.alpha)return"transparent";let{red:t,green:i,blue:n,alpha:a}=e;return`rgba(${255*t|0}, ${255*i|0}, ${255*n|0}, ${a})`})(t.background_color)},children:(0,a.jsx)("div",{className:"thumbnail_DEPRECATED--thumbnail--5lUPd thumbnail_DEPRECATED--baseThumbnail--GkgtJ",style:{backgroundImage:`url(${t.img_url})`}})})})}function ep(e){let{block:t}=e;return(0,a.jsx)("div",{className:"block_kit_row--square--r4-LH",children:(0,a.jsx)("div",{className:el,style:{backgroundImage:`url(${t.img_url})`}})})}function ef(e){let{avatars:t,icon:i}=e;return 0===t.length?null:t.length>1?(0,a.jsxs)("div",{className:ea,children:[(0,a.jsx)("div",{className:"block_kit_row--secondaryUser--GfwAX",children:(0,a.jsx)(em,{block:t[1],size:K.DZ.MEDIUM})}),(0,a.jsx)("div",{className:"block_kit_row--primaryUser--gdi9o",children:(0,a.jsx)(em,{block:t[0],size:K.DZ.MEDIUM})}),i&&(0,a.jsx)(eh,{icon:i})]}):(0,a.jsxs)("div",{className:ea,children:[(0,a.jsx)(em,{block:t[0],size:K.DZ.LARGE}),i&&(0,a.jsx)(eh,{icon:i})]})}function eh(e){let{icon:t}=e,i=new Set([(0,Z.o1)("fc8b3d0c889b51bd8800945089e8b473ff4d619d")]);return(0,a.jsx)("div",{className:"block_kit_row--icon--yvc2A",children:"ImageThumbnailBlock"===t._block_type?(0,a.jsx)("img",{className:`block_kit_row--iconImg--MdORE ${!i.has(t.img_url)?"block_kit_row--iconInvert--tcrGj":""} `,src:t.img_url,alt:""}):"ReacjiBlock"===t._block_type?(0,a.jsx)(ed,{block:t}):"AvatarBlock"===t._block_type?(0,a.jsx)(em,{block:t,size:K.DZ.SMALL16}):void 0})}function ex(e){let t=(0,o.I0)(),{block:i,callbacks:n,isPrimary:r=!0,isDisabled:l,setIsDisabled:s}=e,c=async e=>{try{s(!0);let a=(await n.buildNotificationActionRequest(i.notification_action)).data.meta.updated_notification_blob;e&&t(g.R.enqueue({message:e,error:!1,role:"status"})),i.hide_after_action?n.hideNotification():(n.followLinkIfPossible(),a&&n.updateNotification(a.notification_id,a))}catch(n){let e=n.message||("resolve"===i.notification_action?(0,v.t)("user_notification.an_error_occurred_while_clicking_this_notification"):(0,v.t)("user_notification.an_error_occurred_while_removing_this_notification"));t(z.l.error(e))}finally{s(!1)}},d=eu([i.text]);return(0,a.jsx)(S.ps,{variant:r?"primary":"secondary",onClick:()=>{c(i.screenreader_action_success_announcement)},disabled:l,"aria-describedby":e.describedById,children:d})}function eb(e){let{block:t,actionBlockCallbacks:i,describedById:n}=e,[o,l]=r.useState(!1);return(0,a.jsxs)("div",{className:"block_kit_row--rowBottom--xG8xA",children:[(0,a.jsx)(ex,{block:t.secondary_action,callbacks:i,isPrimary:!1,isDisabled:o,setIsDisabled:l,describedById:n}),(0,a.jsx)(ex,{block:t.primary_action,callbacks:i,isPrimary:!0,isDisabled:o,setIsDisabled:l,describedById:n})]})}function ek(e){let{block:t,plan:i,shouldShowChevron:n,userLastViewedTimestamp:r,inDesktopTray:o,openQuickReply:l}=e;switch(t._block_type){case"BodyAndThumbnailBlock":return(0,a.jsx)(ew,{block:t,plan:i,shouldShowChevron:n});case"SplitlineTitleAndBodyBlock":return(0,a.jsx)(ev,{block:t,shouldShowChevron:n,userLastViewedTimestamp:r,inDesktopTray:o,openQuickReply:l})}}function ew(e){let{block:t,plan:i,shouldShowChevron:n}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"block_kit_row--contentContainer--mCC0g text--fontPos11--rO47d text--_fontBase--VaHfk",children:(0,a.jsxs)("div",{className:"block_kit_row--content--GeQID",children:[(0,a.jsx)("div",{children:eu(t.title)}),(0,a.jsxs)("div",{className:en,children:[(0,a.jsxs)("div",{className:"block_kit_row--textContainer---LLlR",children:[t.description&&(0,a.jsx)("div",{className:"block_kit_row--notificationDescription--SgSPD ellipsis--ellipsisAfter3Lines--eBD0M ellipsis--_ellipsisAfterNLines--5f-ox",children:eu(t.description)}),(0,a.jsxs)("div",{className:"block_kit_row--fromNow--Mp-be",children:[i&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)($.E,{entityId:i.id.toString(),entityName:i.name,imgUrl:i.img_url||void 0}),(0,R.OI)(i.name,21),(0,a.jsx)("div",{className:"block_kit_row--planDivider--pr3-5",children:"\xb7"})]}),(0,a.jsx)(W.Lt,{date:t.created_at,style:"short"})]})]}),n&&(0,a.jsx)("div",{className:"block_kit_row--quickReplyChevron--79tbi",children:(0,a.jsx)(q.M,{})})]})]})}),(()=>{if(!t.thumbnail)return null;let e=t.thumbnail;switch(e._block_type){case"AvatarBlock":return(0,a.jsx)(em,{block:e,size:K.DZ.XLARGE});case"ImageThumbnailBlock":return(0,a.jsx)(ep,{block:e});case"FileThumbnailBlock":return(0,a.jsx)(e_,{block:e})}})()]})}function ev(e){let{block:t,shouldShowChevron:i,userLastViewedTimestamp:n,inDesktopTray:r,openQuickReply:o}=e;return(0,a.jsxs)("div",{className:"block_kit_row--contentContainerRevamp--4-XsW text--fontPos11--rO47d text--_fontBase--VaHfk",children:[(0,a.jsxs)("div",{className:"block_kit_row--titleAndTimestamp--oAOqq",children:[(0,a.jsx)("div",{className:"block_kit_row--title--wN-Cx",children:eu(t.title)}),(0,a.jsx)(eT,{createdAt:t.created_at,lastSeenTimestamp:n})]}),(0,a.jsxs)("div",{className:en,children:[(0,a.jsx)("div",{className:"block_kit_row--subtitle--vq-x-",children:eu(t.subtitle)}),t.description&&(0,a.jsx)("div",{className:"block_kit_row--notificationDescriptionStructuredView--XX-Rw ellipsis--ellipsisAfter3Lines--eBD0M ellipsis--_ellipsisAfterNLines--5f-ox",children:eu(t.description)}),i&&o&&(0,a.jsx)("div",{className:_()(r?eo:er,"block_kit_row--quickReplyGradient--AHjB2")})]})]})}function eg(e){let{notification:t}=e,i=(0,v.t)("user_notifications.unread_notifcation_sr");return(0,a.jsxs)("div",{className:_()("block_kit_row--rowTop--ZJJFO",ei),id:es(t),children:[t.is_unread?(0,a.jsx)("div",{className:"block_kit_row--unreadDotStructuredView--lGcxO"}):null,(0,a.jsx)(ef,{avatars:t.avatars,icon:t.icon}),t.is_unread?(0,a.jsx)(O.u,{children:i}):null,e.children]})}function ej(e){let{attachment:t,notification:i,dontShowPlanIcon:n}=e;return(0,a.jsx)(eg,{notification:i,children:(0,a.jsx)(ek,{block:t.body,plan:!0===n?void 0:i.plan,userLastViewedTimestamp:i.filters.user_last_viewed_timestamp})})}function ey(e){let{attachment:t,notification:i,dontShowPlanIcon:n,openQuickReply:o}=e,{inDesktopTray:l}=r.useContext(Q.w);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(L.Dx,{children:(0,a.jsx)(eg,{notification:i,children:(0,a.jsx)(ek,{block:t.body,plan:!0===n?void 0:i.plan,userLastViewedTimestamp:i.filters.user_last_viewed_timestamp,inDesktopTray:l,shouldShowChevron:(0,ee.JP)(i),openQuickReply:o})})}),(0,ee.JP)(i)&&o&&(0,a.jsx)("div",{className:l?eo:er,children:(0,a.jsx)(L.vj,{children:(0,a.jsx)(U.h,{onClick:o,htmlAttributes:{"data-testid":"quick-reply-chevron"},"aria-label":(0,v.t)("user_notifications.open_quickreply"),children:(0,a.jsx)(q.M,{})})})})]})}function eC(e){let{attachment:t,notification:i,actionBlockCallbacks:n}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eg,{notification:i,children:(0,a.jsx)(ek,{block:t.body,plan:i.plan,userLastViewedTimestamp:i.filters.user_last_viewed_timestamp})}),(0,a.jsx)(eb,{block:t.actions,actionBlockCallbacks:n,describedById:es(i)})]})}function eT(e){let{createdAt:t,lastSeenTimestamp:i}=e,n=eN(t,i),r=(0,W.zL)(t,"narrow");if("today"!==n&&"new"!==n){let e=new Date(t),i={};i=!function(e){let t=new Date;return t.setDate(t.getDate()-365),e>=t}(e)?{month:"short",day:"numeric",year:"numeric"}:{month:"short",day:"numeric"},r=new Intl.DateTimeFormat((0,X.Kd)().getPrimaryLocale(!1),i).format(e)}return(0,a.jsx)("div",{className:"block_kit_row--timestamp--gtrx5",children:r})}function eN(e,t){var i;let n=new Date(e),a=new Date,r=new Date(a);if(r.setDate(a.getDate()-1),t&&new Date(t)<n)return"new";if(eA(n,a))return"today";if(eA(n,r))return"yesterday";if(n>=new Date((i=a).getFullYear(),i.getMonth(),i.getDate()-7))return"last_week";return"older"}function eA(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}let eB={new:(0,v.tx)("user_notifications.new"),today:(0,v.tx)("user_notifications.today"),yesterday:(0,v.tx)("user_notifications.yesterday"),last_week:(0,v.tx)("user_notifications.last_7_days"),older:(0,v.tx)("user_notifications.older")};function eI(e){return e.preferred_attachments.length>0&&"ActionableAttachment"===e.preferred_attachments[0]._block_type}let eD={actionable:(0,v.tx)("user_notifications.pending"),actioned:(0,v.tx)("user_notifications.done")};var eP=i(850340),eR=i(492342),eE=i(444947),eF=i(840239),eM=i(766647);function eS(e){let t=e.preferred_attachments.find(e=>eM.L.BlockKit.Block.ATTACHMENT_TYPES.has(e._block_type));if(void 0===t)throw Error(`Unable to render attachment. Hiding notification ${e.notification_id}`);return t}function eO(e){var t;let i,n=(0,o.I0)(),[l,s]=(0,r.useState)(!1),c=(0,o.v9)(e=>e.selectedView.view),{onClick:d,toggleQuickReply:m,onMouseMove:p,onRemove:f,inDesktopTray:h}=r.useContext(Q.w),x=e.notification;r.useEffect(()=>()=>{f(x)},[f,x]);try{i=eS(e.notification)}catch(e){return console.error(`Unsupported Notification: ${e}`),null}let b=t=>{let i=c+"_quickreply";m(t,x,async()=>{if((0,eR.BZ)().notif_new_read_api)try{await E.g1.markNotificationAsRead({notification_id:x.notification_id,currentView:i}),e.updateNotificationCallback(x.notification_id,{...x,is_unread:!1})}catch(e){(0,eF.YD)("Error marking notification as read",e)}else y("resolve",i).then(({data:t})=>{if(t.meta.updated_notification_blob){let i=t.meta.updated_notification_blob;e.updateNotificationCallback(i.notification_id,i)}})})},k=e=>{p(e)},w=async t=>{(0,eE.L9)("file_browser_notification_clicked",{notification_id:x.notification_id,notification_type:x.notification_type,actionable:"ActionableAttachment"===i._block_type,selectedView:c,plan_filter:e.currentPlanFilter,notification_filter:e.currentNotificationFilter}),g(t);let a=d(x);if((0,eR.BZ)().notif_new_read_api)try{await E.g1.markNotificationAsRead({notification_id:x.notification_id,currentView:c}),a||e.followLinkOnClickCallback(),e.updateNotificationCallback(x.notification_id,{...x,is_unread:!1})}catch(e){n(z.l.error((0,v.t)("user_notification.an_error_occurred_while_clicking_this_notification")))}else y("resolve").then(({data:t})=>{if(a||e.followLinkOnClickCallback(),t.meta.updated_notification_blob){let i=t.meta.updated_notification_blob;e.updateNotificationCallback(i.notification_id,i)}},e=>{n(z.l.error((0,v.t)("user_notification.an_error_occurred_while_clicking_this_notification")))})},g=e=>{e.stopPropagation()},j=()=>{s(!0),e.onHide&&e.onHide()},y=(e,t=c)=>E.g1.updateNotification({notification_id:x.notification_id,notification_action:e,currentView:t}),C=(t,i=c)=>{switch(eE.RQ.trackDefinedEvent("notification.file_browser_notification_actioned",{notification_id:x.notification_id,notification_type:x.notification_type,notification_action:t,selectedView:c,plan_filter:e.currentPlanFilter||void 0,notification_filter:e.currentNotificationFilter}),t){case"resolve":return E.g1.acceptNotification({notification_id:x.notification_id,currentView:i});case"reject":return E.g1.rejectNotification({notification_id:x.notification_id,currentView:i});default:(0,eP.vE)(t)}},T=(t,i,n)=>{try{switch(t._block_type){case"ActionableAttachment":{let n={updateNotification:e.updateNotificationCallback,hideNotification:j,followLinkIfPossible:e.followLinkOnClickCallback,buildNotificationActionRequest:(0,eR.BZ)().notif_new_actionable_api?C:y};return(0,a.jsx)(eC,{attachment:t,notification:i,actionBlockCallbacks:n})}case"ClientActionableAttachment":return(0,a.jsx)(ey,{attachment:t,notification:i,openQuickReply:n});case"BodyAndThumbnailAttachment":case"BodyAttachment":return(0,a.jsx)(ej,{attachment:t,notification:i,dontShowPlanIcon:e.dontShowPlanIcon})}}catch(e){console.error(`Unable to render attachment: ${t}`),j()}},N="ActionableAttachment"===(t=i)._block_type?(0,a.jsx)("article",{className:et,onMouseMove:k,children:T(t,x)}):"ClientActionableAttachment"===t._block_type?(0,a.jsxs)(L.fC,{className:et,children:[(0,a.jsx)(L.c7,{className:"block_kit_row--clientActionableRowFocus--KpScN",onClick:w,htmlAttributes:{onMouseEnter:h?void 0:b,onMouseMove:k,"data-testId":"client-actionable-button",role:"link"}}),T(t,x,b)??(0,a.jsx)(a.Fragment,{})]}):(0,a.jsx)(u.h,{className:_()(et,ei),htmlAttributes:{onMouseEnter:h?void 0:b,onMouseMove:k,role:"link"},onClick:w,children:T(t,x)});return!l&&N||null}var eL=i(193447),eU=i(63493),eq=i(22998),eH=i(837777),eV=i(378111),eG=i(169080);let eZ=class e{constructor(){this.circularBuffer=new eq.P(e.BUFFER_CAPACITY),this.lastTimestamp=0}clear(){this.circularBuffer.clear()}push(t,i){i-this.lastTimestamp>e.THROTTLE_DURATION_MS&&(this.circularBuffer.push(t),this.lastTimestamp=i)}getLocation50msAgo(){let e=this.circularBuffer.toArray();return e.length>0?e[0]:new eV.OW(window.innerWidth,window.innerHeight)}};function eW(e){let[t,i]=(0,r.useState)(null),[n,o]=(0,r.useState)(0),l=(0,A.CA)(),s=r.useRef(eL.ZT),c=r.useRef(eL.ZT),d=r.useRef(null),u=r.useRef(null),m=(0,ee.J5)(l,t),_=r.useRef({notificationId:"",mouseLocationHistory:new eZ,scheduledShowQuickReply:void 0,scheduledMarkAsRead:void 0});(0,r.useEffect)(()=>{u.current&&u.current.addEventListener("mouseover",e=>{clearTimeout(_.current?.scheduledShowQuickReply)})},[t]);let p=r.useMemo(()=>{function e(e,t,n){let a=window.innerWidth>900&&window.innerHeight>650;_.current.notificationId=e.notification_id,a&&(0,ee.JP)(e)?(i((0,ee.K3)(e)),o(t),s.current=n):(i(null),s.current=eL.ZT),_.current.mouseLocationHistory.clear()}return{onClick:e=>!1,toggleQuickReply:(t,i,n)=>{let a=!1;if(i.notification_id!==_.current.notificationId&&u.current&&t instanceof MouseEvent){let e=u.current.getBoundingClientRect(),i=new eV.OW(e.left,e.top),n=new eV.OW(e.left,e.bottom),r=[_.current.mouseLocationHistory.getLocation50msAgo(),i,n];a=(0,eH.c)(new eV.OW(t.clientX,t.clientY),r)}let r=t.target;if(a)clearTimeout(_.current?.scheduledShowQuickReply),_.current&&(_.current.scheduledShowQuickReply=setTimeout(()=>{e(i,r.getBoundingClientRect().bottom,n)},500));else clearTimeout(_.current?.scheduledShowQuickReply),e(i,r.getBoundingClientRect().bottom,n)},onMouseMove:e=>{_.current.mouseLocationHistory.push(new eV.OW(e.clientX,e.clientY),e.timeStamp)},onRemove:e=>{e.notification_id===_.current.notificationId&&i(null)},inDesktopTray:!1}},[u]);if(!(0,eR.BZ)().desktop_quickreply_filebrowser)return(0,a.jsx)(a.Fragment,{children:e.children});let f=Math.max(0,n-(d.current?.getBoundingClientRect().y??0)-(u.current?.getBoundingClientRect().height??640));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"quick_reply_switcher--hoverContainer--06-L-",ref:d,children:t&&!m&&(0,a.jsx)("div",{className:"quick_reply_switcher--quickReplyContainer--CWkQI","data-testid":"quick-reply-container",style:{top:f,maxHeight:640,minHeight:450},onMouseEnter:()=>{clearTimeout(_.current?.scheduledMarkAsRead),_.current.scheduledMarkAsRead=setTimeout(()=>{c.current=s.current},1e3)},onMouseLeave:()=>{clearTimeout(_.current?.scheduledMarkAsRead),c.current(),c.current=eL.ZT,s.current=eL.ZT},children:(0,a.jsx)(eU.L,{children:(0,a.jsx)(eG.P,{quickReplyInfo:t,onClose:()=>i(null),fileBrowser:!0,ref:u})})})}),(0,a.jsx)(Q.w.Provider,{value:p,children:e.children})]})}eZ.BUFFER_CAPACITY=10,eZ.DESIRED_DURATION_MS=50,eZ.THROTTLE_DURATION_MS=eZ.DESIRED_DURATION_MS/eZ.BUFFER_CAPACITY;let ez="user_notifications_dropdown--arrowRight--sAQvV",eX="user_notifications_dropdown--dropdownContainerEmptyState--k5Fhh user_notifications_dropdown--dropdownContainer--W42re text--fontPos11--rO47d text--_fontBase--VaHfk",eK="user_notifications_dropdown--dateHeader--Z3pNH",eJ="user_notifications_dropdown--markAllReadButton--l4S7s text--fontPos11--rO47d text--_fontBase--VaHfk";function eY(e,t){let i=(0,o.I0)(),n=(0,o.v9)(e=>e.user.id),a=(0,o.v9)(e=>e.user.community_profile_id),s=(0,o.v9)(e=>e.authedUsers.byId[n]?.plans),c=r.useMemo(()=>void 0!==s&&(new Map(s.map(e=>[e.plan_id,e.is_org])).get(t)||!1),[s,t]),d=(0,o.v9)(e=>e.userNotifications.communityProfileBellStates),u=(0,o.v9)(e=>e.selectedView.view),[m,_]=(0,r.useState)(()=>new Map),[f,h]=(0,r.useState)(!0),b=(0,x.d)(d);r.useEffect(()=>{let r=(0,l.D)(()=>{e?a&&(b.current[a]&&i((0,R.jL)({isBellStateHigh:!1,userInitiated:!0,profileId:a})),E.g1.getCommunityServerDriven({currentView:u}).then(({data:e})=>{w(e.meta)}).catch(e=>{i(g.R.enqueue({message:(0,v.t)("user_notification.an_error_occurred_while_fetching_your_community_notifications"),type:"user-notification",error:!0})),i(y.kp())})):((0,R.Z4)(!1,R.U8,n),E.g1.getServerDrivenPlan({currentPlanId:t,currentView:u,isPlanOrg:c}).then(({data:e})=>{w(e.meta)}).catch(e=>{i(g.R.enqueue({message:(0,v.t)("user_notification.an_error_occurred_while_fetching_your_notifications"),type:"user-notification",error:!0})),i(y.kp())}))},800,!0);h(!0),r()},[t,b,u,i,e,c,a,n]);let w=e=>{let t=new Map,i=!1;e.forEach(e=>{t.set(e.notification_id,e),!i&&e.filters.is_priority&&(i=!0)}),_(t),h(!1)};return{notificationFeedMap:m,isFetchingNotifications:f,markAllAsReadFn:()=>{(e?k.ZP.post("/api/user_notifications/community/mark_read",{currentView:u,source:p.Gu?"desktopbell":"web"}):k.ZP.post("/api/user_notifications/mark_read/plan",{current_plan_id:t,currentView:u,is_plan_org:c,source:p.Gu?"desktopbell":"web"})).then(()=>{_(new Map(Array.from(m,([e,t])=>(t.is_unread=!1,[e,t]))))}).catch(()=>{i(g.R.enqueue({message:(0,v.t)("user_notification.an_error_occurred_marking_all_as_read"),type:"user-notification",error:!0}))})},updateNotification:(e,t)=>{_(new Map(m.set(e,t)))}}}function e$(e,t){return e.filter(e=>!t.includes(e.notification_id))}function eQ(e){return e.some(e=>e.filters.is_priority)}function e0(e){let{inCommunity:t,containerClassName:i,arrowRight:o}=e,[l,s]=(0,r.useState)(R.U8),{notificationFeedMap:c,isFetchingNotifications:d,markAllAsReadFn:u,updateNotification:m}=eY(!!t,l),p=r.useCallback(e=>{e===M.U&&(e=R.U8),(0,T.U6)(e,"notifications",void 0),s(e)},[s]);return d?(0,a.jsxs)(n.Container,{classNameProp:_()(eX,i,{[ez]:o}),children:[(0,a.jsx)(n.Header,{selectedPlan:l,onPlanFilterUpdate:p,inCommunity:!!t,inDesktopTray:!1}),(0,a.jsx)(n.LoadingFeed,{})]}):(0,a.jsx)(e1,{...e,selectedPlan:l,planFilterFn:p,notificationFeedMap:c,markAllAsReadFn:u,updateNotification:m})}function e1({containerClassName:e,arrowRight:t,inCommunity:i,selectedPlan:o,planFilterFn:l,notificationFeedMap:c,markAllAsReadFn:d,updateNotification:u}){let[m,p]=(0,r.useState)([]),f=o===R.U8?M.U:o,h=e$([...c.values()],m),x=eQ(h),k=!!(0,R.X_)(x)&&x,w=(0,R.Lx)(h),v=(0,B.Ng)(),g=(0,C.Kp)(w,!!v),[j,y,N]=s.m.useTabs({all:!0,priority:k,unread:!0},{defaultActive:()=>g?"priority":"all"}),A=(0,b.D9)(N.activeTab);r.useEffect(()=>{N.activeTab!==A&&(0,T.EB)({name:"user_notifications_filter_viewed",filter_type:N.activeTab,dropdown_location:"web"})},[A,N.activeTab]);let I=r.useMemo(()=>h.filter(e=>e.filters.is_priority),[h]),D=r.useMemo(()=>h.filter(e=>e.is_unread),[h]),P=e=>(0,a.jsx)(n.Feed,{notifications:e,currentPlanFilter:f,currentNotificationFilter:N.activeTab,hiddenNotificationIds:m,setHiddenNotificationIds:p,inCommunity:i,fillParent:!1,updateNotificationCallback:u});return(0,a.jsx)(n.Container,{classNameProp:_()(0!==c.size?"user_notifications_dropdown--dropdownContainer--W42re text--fontPos11--rO47d text--_fontBase--VaHfk":eX,e,{[ez]:t}),children:(0,a.jsxs)(eW,{children:[(0,a.jsx)(n.Header,{selectedPlan:o,onPlanFilterUpdate:e=>l(e),inCommunity:!!i,inDesktopTray:!1}),(0,a.jsx)(n.FilterToggle,{notificationFilter:N.activeTab,toggleNotificationFilter:e=>{(0,T.T6)({filter_type:e},"user_notifications_filter_clicked")},notifications:h,markAllAsReadFn:d,tabManager:N,tabPropsMap:j}),(0,a.jsx)(s.m.TabPanel,{...y.all,children:P(h)}),(0,a.jsx)(s.m.TabPanel,{...y.priority,children:P(I)}),(0,a.jsx)(s.m.TabPanel,{...y.unread,children:P(D)})]})})}var e5=n||(n={});function e3(e){return(0,a.jsx)("h3",{className:eK,children:eB[e.notificationDateGroup]})}function e4(e){return(0,R.X_)(!0)?(0,a.jsx)("h3",{className:eK,children:eD[e.notificationPriorityGroup]}):null}function e9(e){return e.some(e=>e.is_unread)}e5.Container=function({children:e,classNameProp:t}){return(0,a.jsx)(c.S,{eventListeners:["onClick","onMouseDown"],children:(0,a.jsx)("div",{className:t,"data-onboarding-key":F.O3,children:e})})},e5.LoadingFeed=function(){return(0,a.jsx)("div",{className:"user_notifications_dropdown--loadingContainer--EqjyM",children:(0,a.jsx)(d.T,{})})},e5.Feed=function(e){let t=(0,D.XU)(),i=(0,o.v9)(e=>t?e.authedUsers.byId[t.id]?.plans:null),n=(0,o.oR)(),l=(0,o.I0)(),s=(0,I.Mn)(),c=(0,A.CA)(),d=(0,B.Ng)(),u=!1;if(t&&!e.inCommunity&&i?.length===1&&(u=!0,e.currentPlanFilter===M.U)){let t=i[0].plan_id;for(let i of e.notifications)if(i.plan?.id.toString()!==t){u=!1;break}}let m=r.useCallback(t=>()=>{var i,a;if(!t.deeplink)return;let r=new URL(t.deeplink.href),o=r.pathname;if(o.includes("project"))i=o.split("project/")[1],(0,T.Qs)("file_browser_folder_click",i,null,s,{selectedView:"notifications",planFilterId:e.currentPlanFilter===M.U?null:e.currentPlanFilter});else if(o.includes("team"))a=o.split("team/")[1],(0,T.H)("file_browser_team_click",a,s,{selectedView:"notifications",planFilterId:e.currentPlanFilter===M.U?null:e.currentPlanFilter});else if((0,f.x7)(o)){let t=(0,f.BX)(o);t&&l(j.ku({fileKey:t,entrypoint:"notifications",currentPlanFilter:{planId:e.currentPlanFilter===M.U?void 0:e.currentPlanFilter||void 0}}))}l(y.kp());let u=!!c&&c.key===(0,f.BX)(r.pathname);if(!p.YO&&u)l((0,N.B)({params:r.searchParams.toString(),hash:r.hash}));else if(t.deeplink.use_unsafe)h.ZP.unsafeRedirect(r.href,p.YO?void 0:"_blank");else if(e.inDesktopTray)h.ZP.redirect(r.href);else try{let e=(0,P.eP)(n.getState(),o);if("teamFeed"===e.view)return void(d&&t.plan?.id.toString()===d.id?l(y.fv(e)):h.ZP.redirect(r.href,p.YO?void 0:"_blank"));return void h.ZP.redirect(r.href,p.YO?void 0:"_blank")}catch{h.ZP.redirect(r.href,p.YO?void 0:"_blank")}},[l,c,e.currentPlanFilter,e.inDesktopTray,s,n,d]);if(0===e.notifications.length)return(0,a.jsx)("div",{className:"user_notifications_dropdown--emptyRow--TbCuQ",children:(0,v.tx)("user_notifications.dropdown.no_notifications")});{var _;let t,i;"priority"===e.currentNotificationFilter&&e.notifications.sort((e,t)=>Number(eI(t))-Number(eI(e)));let n=e.inCommunity?"user_notifications_dropdown--scrollContainer---Rell":"user_notifications_dropdown--scrollContainerWithPlan--zfiPd",o=eN((_=e.notifications)[0].preferred_attachments[0].body.created_at,_[0].filters.user_last_viewed_timestamp)===eN(_[_.length-1].preferred_attachments[0].body.created_at,_[0].filters.user_last_viewed_timestamp);return(0,a.jsx)(w.l,{className:`${!e.fillParent?n:""}`,children:(0,a.jsx)("div",{children:e.notifications.map(n=>{let l=null;return l="priority"===e.currentNotificationFilter?(e=>{let t=null,n=eI(e)?"actionable":"actioned";return n!==i&&(i=n,t=(0,a.jsx)(e4,{notificationPriorityGroup:n},`priority-${e.notification_id}`)),t})(n):(e=>{let i,n=null;if(!o)try{i=eS(e);let r=eN(i.body.created_at,e.filters.user_last_viewed_timestamp);r!==t&&(t=r,n=(0,a.jsx)(e3,{notificationDateGroup:r},`date-${e.notification_id}`))}catch(e){console.error("Skipping date header, unsupported notification")}return n})(n),(0,a.jsxs)(r.Fragment,{children:[l,(0,a.jsx)(eO,{notification:n,updateNotificationCallback:e.updateNotificationCallback,dontShowPlanIcon:u,currentPlanFilter:e.currentPlanFilter,currentNotificationFilter:e.currentNotificationFilter,inDesktopTray:e.inDesktopTray,onHide:()=>{var t;return t=n.notification_id,void e.setHiddenNotificationIds([...e.hiddenNotificationIds,t])},followLinkOnClickCallback:m(n)},`row-${n.notification_id}`)]},`row-container-${n.notification_id}`)})})})}},e5.UnreadBar=function(e){return e9(e.notifications)?(0,a.jsxs)("div",{className:"user_notifications_dropdown--unreadToggleBar--QJMlN",children:[function(e){let t=e.reduce((e,t)=>e+Number(t.is_unread),0);return(0,a.jsx)("div",{className:"user_notifications_dropdown--unread--n9TRK",children:(0,v.t)("user_notifications.unread_count",{unreadCount:t})})}(e.notifications),e9(e.notifications)&&(0,a.jsx)(u.h,{onClick:e.markAllAsReadFn,className:eJ,children:(0,v.tx)("user_notifications.dropdown.mark_all_as_read")})]}):null},e5.DateHeader=e3,e5.PriorityHeader=e4,e5.Header=function(e){let t=!e.inDesktopTray;return(0,a.jsxs)("div",{className:"user_notifications_dropdown--header--1Z4T9",children:[e.inCommunity?(0,a.jsx)("div",{className:"user_notifications_dropdown--orgName--nbgTM ellipsis--ellipsis--70pHK text--fontPos11--rO47d text--_fontBase--VaHfk",children:(0,v.t)("user_notification.community_notifications")}):(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(M.p,{currentPlanFilter:e.selectedPlan===R.U8?M.U:e.selectedPlan,onPlanFilterUpdate:e.onPlanFilterUpdate,displaySettings:t})}),e.children]})},e5.FilterToggle=function(e){let t=(0,a.jsxs)(s.m.TabStrip,{manager:e.tabManager,children:[(0,a.jsx)(s.m.Tab,{...e.tabPropsMap.all,children:(0,v.t)("user_notification.all")}),(0,a.jsx)(s.m.Tab,{...e.tabPropsMap.priority,children:function(e){let t=e.reduce((e,t)=>e+Number(eI(t)),0);return 0===t?(0,v.t)("user_notifications.requests_empty"):(0,v.t)("user_notifications.requests_toggle_count",{actionableCount:t})}(e.notifications)}),(0,a.jsx)(s.m.Tab,{...e.tabPropsMap.unread,children:function(e){let t=e.reduce((e,t)=>e+Number(t.is_unread),0);return 0===t?(0,v.t)("user_notifications.unread_empty"):(0,v.t)("user_notifications.unread_toggle_count",{unreadCount:t})}(e.notifications)})]});return(0,a.jsxs)("div",{className:"user_notifications_dropdown--filterToggleBar--hk648 user_notifications_dropdown--unreadToggleBar--QJMlN",children:[t,e9(e.notifications)&&(0,a.jsx)(u.h,{onClick:e.markAllAsReadFn,className:eJ,children:(0,v.tx)("user_notifications.dropdown.mark_all_as_read")})]})}},337:function(e,t,i){i.d(t,{p:()=>B,U:()=>A});var n=i(750357),a=i(853505),r=i(577851),o=i(211839),l=i(410802),s=i(12523),c=i(406954),d=i(403706),u=i(90131),m=i(492342),_=i(240473),p=i(590914),f=i(404639),h=i(469271),x=i(260251),b=i(416792),k=i(242802),w=i(293111),v=i(218669),g=i(798097),j=i(260736),y=i(117350);let C="notifs_plan_filter--boldTitle--6AAsI",T="notifs_plan_filter--planFilterContainer--DKxKe";var N=i(335489);let A="ALL_PLANS_FILTER";function B(e){let{currentPlanFilter:t,onPlanFilterUpdate:i}=e,[B,I]=a.useState(A),D=(0,r.I0)(),P=(0,b.CA)(),R=(0,a.useRef)(null),E=!!(0,m.BZ)().limited_plan_spaces,{getTriggerProps:F,manager:M}=o.H9(),S=(0,k.xJ)(),O=(0,r.v9)(e=>E?e.plans:S?e.authedUsers.byId[S.id]?.plans:null),L=(0,r.v9)(w.G),U=(0,r.v9)(e=>e.orgById),q=()=>{D(f.kp()),(0,x.T6)({userId:S?.id,fileKey:P?.key,eventName:"Notification Settings Button Clicked"}),D(h.K4({type:y.p,data:{tab:y.m.NOTIFICATIONS}}))};if(!S||!O||O.length<=1)return(0,n.jsxs)("div",{className:T,children:[(0,n.jsx)("h1",{className:C,children:(0,p.t)("user_notification.all_notifications")}),e.displaySettings&&O?.length===1&&(0,n.jsx)(l.h,{"aria-label":(0,p.t)("user_notifications.settings"),htmlAttributes:{"data-dropdown-tooltip":(0,p.t)("user_notifications.settings"),"data-tooltip-type":j.fR.TEXT,"data-tooltip-show-above":!0},onClick:q,children:(0,n.jsx)(u.v,{})})]});let H=O.map(e=>e.plan_id);H.unshift(A);let V=(e,t)=>e===A?(0,p.t)("user_notification.all_notifications"):t[e],G=O.reduce((e,t)=>{if(E&&"plan_type"in t){let i="";if(t.plan_type===g.k.ORG){let e=U[t.plan_id];i=e?.name??i}else{let e=L[t.plan_id];i=e?.name??i}e[t.plan_id]=i}else"name"in t&&(e[t.plan_id]=t.name);return e},{}),Z=H.map(e=>(0,n.jsx)(s.mJ,{value:e,children:V(e,G)},e));return(0,n.jsxs)("div",{className:T,ref:R,children:[(0,n.jsx)(c.fE,{children:(0,n.jsxs)(o.fC,{manager:M,children:[(0,n.jsxs)(d.h,{"aria-label":(0,p.t)("user_notifications.notif_filter_label",{planName:V(t,G)}),className:"notifs_plan_filter--dropdownButton--YQozm",...F(),children:[(0,n.jsx)("span",{className:[C,"notifs_plan_filter--autoTruncate--3lS3f ellipsis--ellipsis--70pHK"].join(" "),children:(0,v.OI)(V(t,G),35)}),(0,n.jsx)(_.n,{svg:N.Z,className:"notifs_plan_filter--chevronIcon--G7ev8"})]}),(0,n.jsx)(o.W2,{children:(0,n.jsx)(s.Ee,{title:null,onChange:e=>{i(e),I(e)},value:B,children:Z})})]})}),e.displaySettings&&(0,n.jsx)(l.h,{"aria-label":(0,p.t)("user_notifications.settings"),htmlAttributes:{"data-dropdown-tooltip":(0,p.t)("user_notifications.settings"),"data-tooltip-type":j.fR.TEXT,"data-tooltip-show-above":!0},onClick:q,children:(0,n.jsx)(u.v,{})})]})}},763667:function(e,t,i){i.d(t,{Tp:()=>z});var n=i(750357),a=i(853505),r=i(577851),o=i(406954),l=i(732530),s=i(403706),c=i(941679),d=i(317429),u=i(829336),m=i(473550),_=i(451410),p=i(702175),f=i(339093),h=i(641857),x=i(363240),b=i(53022),k=i.n(b),w=i(862398),v=i(229519),g=i(775925),j=i(445102),y=i(555792),C=i(590914),T=i(225094),N=i(469271),A=i(926941),B=i(562675),I=i(363090),D=i(242802),P=i(752212),R=i(511705),E=i(428785),F=i(95238),M=i(712824),S=i(144949),O=i(506457),L=i(410090),U=i(389147),q=i(859340),H=i(12967);let V="edit_color_palette_modal--modalLabel--R2SPI text--fontPos11--rO47d text--_fontBase--VaHfk",G="edit_color_palette_modal--circleButton--5XzrZ";function Z({color:e,setColor:t,index:i,isColorPickerOpen:a,setColorPickerOpen:r,removeColor:c,theme:d,dropperDisabled:u}){let{getContainerProps:m,getTriggerProps:_}=o.Sv({isOpen:a,onOpenChange:r,type:"menu",softDismiss:!0});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.W2,{...m(),children:(0,n.jsx)(U.F,{color:e,theme:d,currentTool:h.UAh.NONE,dropdownShown:null,onColorChange:t,dropperDisabled:u})}),(0,n.jsxs)("div",{className:"edit_color_palette_modal--colorCircleOuter--803GZ",children:[(0,n.jsx)(l.C,{"aria-label":(0,C.t)("whiteboard.colors.palette.hexadecimal",{hex:(0,w.colorToHex)(e)}),className:G,..._(),children:(0,n.jsx)(L.T0,{size:"large",value:e,selectionState:a?"selected":"unselected",paletteType:"base",background:"light"},e+"-"+i)}),(0,n.jsx)(s.h,{className:k()({"edit_color_palette_modal--deleteColorButton--KNRme":!0,"edit_color_palette_modal--deleteColorButtonDisabled--78qNl":a}),onClick:()=>c(),"aria-label":(0,C.t)("whiteboard.color_palettes.modal.remove_color",{color_name:(0,C.t)("whiteboard.colors.palette.hexadecimal",{hex:(0,w.colorToHex)(e)})}),"data-testid":`delete-color-button-${i}`,children:(0,n.jsx)(p.J,{className:"edit_color_palette_modal--deleteColorIcon--d-4TT"})})]},"wrapper"+e+"-"+i)]})}function W({onSave:e,onCancel:t,palette:i,enableSubmitWithNoChanges:o,manager:s,isPaletteEyedropperActive:_,theme:p}){let b=(0,r.I0)(),[k,A]=a.useState(i?.name||""),[I,F]=(0,x.KO)(H.jc),M=a.useCallback(()=>-1!==I&&(F(-1),!0),[I,F]);(0,B.jI)(M,B.Yw.OVERLAY);let U=a.useMemo(()=>i?.baseColors||(0,O.mn)(),[i?.baseColors]),[W,X]=(0,x.KO)(H.Ur),K=(0,x.b9)(S.Pl),J=!(0,v._T)(U,W)||o,[Y,$]=a.useState(!1);a.useEffect(()=>(F(-1),X(U),K(h.hGO.EDIT_PALETTE_MODAL),()=>{F(-1),X(U),K(h.hGO.SELECTION)}),[F,X,K,U]);let Q=(0,r.v9)(e=>{let t=e.selectedView;return"fullscreen"!==t.view||t.editorType!==E.TU.Whiteboard}),ee=a.useCallback(e=>{X([...W,e])},[W,X]),et=a.useCallback((e,t)=>{X([...W.slice(0,e),t,...W.slice(e+1)])},[W,X]),ei=a.useCallback(e=>{b(N.bF({type:z.type,data:{palette:{uuid:e,name:k,baseColors:W},enableSubmitWithNoChanges:!0,theme:p}}))},[b,k,W,p]),en=(0,P.V7)(),ea=(0,D.dO)(),er=(0,q.F1)(),eo=a.useCallback(()=>{let t=W.some((e,t)=>W.some((i,n)=>t!==n&&(0,v.l7)(e,i)));if($(t),t)return;let n=W.map(e=>(0,w.colorToHex)(e,1));if(k&&ea&&n.length){let t=i?.uuid||(0,j.k)();i?(0,H.s5)({name:k,teamId:en,baseColors:n,uuid:t},b,()=>ei(t)):((0,H.UJ)({name:k,teamId:en,uuid:t,baseColors:n,creatorId:ea,isTeamDefault:!1,canRead:!0},b,()=>ei(t)),er(t,n.length,!0)),e()}},[W,k,ea,i,e,en,b,ei,er]),el=function(e){let t=(0,v.NI)(g.B6.MULTIPLAYER_PURPLE)||v.E5;if(!e)return t;let i=(0,f.pV)(e),n=360*i.h,a={...i,h:(n+40)%360/360};return(0,f.aw)(a)}(W.length>0?W[W.length-1]:null),es=W.length>=R.bE,ec=k&&k.trim()&&W.length>0&&(!i||J||k!==i.name),ed=i?(0,C.t)("whiteboard.color_palettes.modal.edit_palette"):(0,C.t)("whiteboard.color_palettes.modal.create_palette");return(0,n.jsx)(c.fC,{width:"fit-content",height:"dynamic",manager:s,children:(0,n.jsxs)(d.AU,{allowOverflow:!0,children:[(0,n.jsx)(d.h4,{children:(0,n.jsx)(d.Dx,{children:ed})}),(0,n.jsxs)(d.uT,{style:{overflow:"visible"},children:[(0,n.jsx)(u._,{htmlFor:"palette-name-input",className:V,children:(0,C.tx)("whiteboard.color_palettes.modal.name")}),(0,n.jsx)("div",{className:"edit_color_palette_modal--nameInput--w0zz2",children:(0,n.jsx)(m.I,{id:"palette-name-input",placeholder:(0,C.t)("whiteboard.color_palettes.modal.palette_name"),value:k||"",onChange:e=>A(e.slice(0,100)),size:"lg","data-testid":"palette-name-input"})}),(0,n.jsxs)("div",{className:"edit_color_palette_modal--colorsContainer--Y0HUV",children:[(0,n.jsx)("h3",{className:V,children:(0,C.tx)("whiteboard.color_palettes.modal.colors")}),(0,n.jsx)("p",{className:"edit_color_palette_modal--modalDescription--ZCWCF text--fontPos11--rO47d text--_fontBase--VaHfk",children:(0,C.tx)("whiteboard.color_palettes.modal.choose_up_to_9_colors")}),Y&&(0,n.jsx)("p",{className:"edit_color_palette_modal--modalDescriptionError--OnjHk text--fontPos11--rO47d text--_fontBase--VaHfk",children:(0,C.tx)("whiteboard.color_palettes.modal.duplicate_colors")}),(0,n.jsxs)("div",{className:"edit_color_palette_modal--colorPaletteContainer--dq5EX",children:[W.map((e,t)=>(0,n.jsx)(Z,{color:e,setColor:e=>et(t,e),index:t,isColorPickerOpen:!_&&I===t,setColorPickerOpen:e=>F(e?t:-1),removeColor:()=>{X([...W.slice(0,t),...W.slice(t+1)])},dropperDisabled:Q,theme:p},"editbutton-"+e+"-"+t)),!es&&(0,n.jsx)(l.C,{"aria-label":(0,C.t)("whiteboard.color_palettes.modal.add_color"),"aria-haspopup":!0,"aria-expanded":!1,"data-testid":"add-color-button",className:G,onClick:()=>{F(W.length),ee(el)},children:(0,n.jsx)(L.VI,{size:"large",value:L.R7,swatchStyle:{boxShadow:"0px 0px 0px 1px rgba(0, 0, 0, 0.2) inset"},fallbackSvg:L.uT})})]})]})]}),(0,n.jsx)(d.$_,{children:(0,n.jsxs)(d.Dj,{children:[(0,n.jsx)(T.x,{color:"secondary",children:(0,C.tx)("whiteboard.color_palettes.modal.palettes_visible_to_everyone")}),(0,n.jsx)(y.XT,{variant:"secondary",onClick:t,children:(0,C.tx)("whiteboard.color_palettes.modal.cancel")}),(0,n.jsx)(y.XT,{variant:"primary",disabled:!ec,type:"submit",onClick:eo,htmlAttributes:{"data-testid":"save-button"},children:(0,C.tx)("whiteboard.color_palettes.modal.save_palette")})]})})]})})}let z=(0,M.Y3)(function({palette:e,theme:t,enableSubmitWithNoChanges:i,...o}){let l=(0,r.I0)(),s=(0,D.dO)(),c=(0,P.V7)(),d=_.dd({open:o.open,onClose:o.onClose}),u=(0,I.ob)(),m=(0,x.Dv)(S.Pl),p=u===h.UAh.DROPPER_COLOR&&m===h.hGO.EDIT_PALETTE_MODAL,f=a.useCallback(()=>{l(N.eI())},[l]);return(0,n.jsx)("div",{className:k()("edit_color_palette_modal--headerModalTransitionContainer--EDIvH",{"edit_color_palette_modal--hidden--bhTTI":p}),children:(0,n.jsx)(A.Ui,{name:F.V4.FIGJAM_EDIT_PALETTE_MODAL,properties:{userId:s,teamId:c,type:e?"edit palette":"new palette"},children:(0,n.jsx)(W,{onSave:f,onCancel:f,palette:e,enableSubmitWithNoChanges:i,manager:d,isPaletteEyedropperActive:p,theme:t})})})},"EditColorPaletteModal")},833038:function(e,t,i){i.d(t,{P:()=>L});var n=i(750357),a=i(577851),r=i(451410),o=i(941679),l=i(317429),s=i(361949),c=i(739640),d=i(410802),u=i(958506),m=i(800826),_=i(903132),p=i(158639),f=i(555792),h=i(590914),x=i(864197),b=i(469271),k=i(926941),w=i(750779),v=i(242802),g=i(10553),j=i(752212),y=i(511705),C=i(260736),T=i(95238),N=i(712824),A=i(155969),B=i(12967),I=i(573151);let D=(0,N.Y3)(function({paletteUuid:e}){let t=(0,a.I0)();return(0,n.jsx)(A.Jd,{size:300,confirmText:(0,h.t)("whiteboard.color_palettes.modal.delete_color_palette_button"),confirmationTitle:(0,h.t)("whiteboard.color_palettes.modal.delete_color_palette_confirmation_modal_title"),popStack:!0,destructive:!0,onConfirm:()=>{(0,B.fX)(e,t)},children:(0,n.jsx)("div",{className:I.Tr,children:(0,h.tx)("whiteboard.color_palettes.modal.delete_color_palette_confirmation_modal_content")})})},"DeleteColorPaletteConfirmationModal");var P=i(506457),R=i(410090),E=i(859340),F=i(763667);let M=(0,N.Y3)(function({paletteName:e,paletteUuid:t}){let i=(0,a.I0)(),r=(0,j.V7)(),o=(0,a.v9)(e=>e.teams[r]?.name);return o||console.error("No team name found for team id",r),(0,n.jsx)(A.Jd,{size:360,confirmationTitle:(0,h.t)("whiteboard.color_palettes.make_default_confirmation_modal.title"),confirmText:(0,h.t)("whiteboard.color_palettes.make_default_confirmation_modal.confirm_button"),content:(0,h.t)("whiteboard.color_palettes.make_default_confirmation_modal.description",{teamName:o,paletteName:e||(0,h.t)("whiteboard.color_palettes.make_default_confirmation_modal.this_palette")}),onConfirm:()=>{t===y.TX?(0,B.hR)(r,i):(0,B.tR)(r,t,i)},popStack:!0})},"MakePaletteTeamDefaultConfirmationModal");function S({showMakeDefaultButton:e,entryPoint:t,theme:i,...c}){let d=(0,v.dO)(),u=(0,j.V7)(),m=r.dd({open:c.open,onClose:c.onClose}),p=(0,a.I0)(),[x]=(0,_.aM)((0,g.Nm0)({teamId:u}),{enabled:!!u});return(0,n.jsx)(k.Ui,{name:T.V4.FIGJAM_MANAGE_PALETTES_MODAL,properties:{entryPoint:t,userId:d,teamId:u},children:(0,n.jsx)(o.fC,{width:"fit-content",height:"dynamic",manager:m,children:(0,n.jsxs)(l.AU,{children:[(0,n.jsx)(l.h4,{children:(0,n.jsx)(l.Dx,{children:(0,h.t)("whiteboard.color_palettes.manage_modal.color_palettes")})}),(0,n.jsxs)(l.uT,{padding:16,children:[(0,n.jsxs)("div",{className:"manage_color_palettes_modal--subheader--0tMxG",children:[(0,n.jsx)("div",{className:"manage_color_palettes_modal--manageText--Obimw",children:(0,h.tx)("whiteboard.color_palettes.manage_modal.manage_your_teams_color_palettes")}),(0,n.jsx)(f.XT,{variant:"primary",onClick:()=>{p(b.bF({type:F.Tp.type,data:{theme:i}}))},htmlAttributes:{"data-testid":"create-color-palette-button"},children:(0,h.tx)("whiteboard.color_palettes.manage_modal.create_new_palette")})]}),(0,n.jsx)("div",{className:"manage_color_palettes_modal--paletteRowsOuter--5kxen","aria-busy":"loading"===x.status,children:"loaded"===x.status&&x.data.colorPalettesForTeam?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(O,{palette:{uuid:y.TX,name:(0,h.t)("whiteboard.color_palettes.figjam_colors"),baseColors:(0,P.Mo)("base").map(e=>w.Co.format(e)),isTeamDefault:x.data.colorPalettesForTeam.every(e=>!e.isTeamDefault)},theme:i,showMakeDefaultButton:e},y.TX),x.data.colorPalettesForTeam.map(t=>(0,n.jsx)(O,{palette:t,theme:i,showMakeDefaultButton:e},t.uuid))]}):(0,n.jsx)(s.T,{size:"lg",htmlAttributes:{"data-testid":"loading-spinner"}})})]})]})})})}function O({palette:e,theme:t,showMakeDefaultButton:i}){let r=(0,a.I0)(),o=e.uuid===y.TX,l=e.name||(0,h.t)("whiteboard.color_palettes.unnamed_palette");return(0,n.jsxs)(x.j,{width:"fill-parent",direction:"vertical",spacing:"4px",children:[(0,n.jsxs)(x.j,{direction:"horizontal",spacing:"8px",children:[(0,n.jsx)("h3",{children:l}),e.isTeamDefault&&(0,n.jsx)(c.C,{variant:"brandOutline",children:(0,h.t)("whiteboard.color_palettes.manage_modal.default")})]}),(0,n.jsxs)(x.j,{direction:"horizontal",width:"fill-parent",horizontalAlignItems:"space-between",children:[(0,n.jsx)(x.j,{direction:"horizontal",width:"hug-contents",spacing:"0px",children:e.baseColors.map(e=>(0,n.jsx)(R.T0,{value:w.Co.parse(e),paletteType:"base",background:"light",role:"img",ariaLabel:(0,h.t)("whiteboard.colors.palette.hexadecimal",{hex:e})},e))}),(0,n.jsxs)(x.j,{direction:"horizontal",width:"hug-contents",spacing:"8px",children:[!o&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.h,{onClick:()=>{r(b.bF({type:F.Tp.type,data:{palette:{uuid:e.uuid,name:e.name,baseColors:(0,E.gf)(e?.baseColors),isTeamDefault:e.isTeamDefault},theme:t}}))},"aria-label":(0,h.t)("whiteboard.color_palettes.modal.edit_named_palette_tooltip",{palette_name:l}),htmlAttributes:{"data-testid":"edit-color-palette-button-"+e.uuid,"data-tooltip-type":C.fR.TEXT,"data-tooltip":(0,h.t)("whiteboard.color_palettes.modal.edit_named_palette_tooltip",{palette_name:l})},children:(0,n.jsx)(u.l,{})}),(0,n.jsx)(d.h,{onClick:()=>{r(b.bF({type:D.type,data:{paletteUuid:e.uuid}}))},"aria-label":(0,h.t)("whiteboard.color_palettes.modal.delete_named_palette_tooltip",{palette_name:l}),htmlAttributes:{"data-testid":"delete-color-palette-button-"+e.uuid,"data-tooltip-type":C.fR.TEXT,"data-tooltip":(0,h.t)("whiteboard.color_palettes.modal.delete_named_palette_tooltip",{palette_name:l})},children:(0,n.jsx)(m.K,{})})]}),i&&(0,n.jsx)(f.XT,{variant:"secondary",disabled:e.isTeamDefault,onClick:()=>{r(b.bF({type:M.type,data:{paletteUuid:e.uuid,paletteName:e.name}}))},htmlAttributes:{"data-testid":"make-palette-team-default-button-"+e.uuid},children:(0,h.tx)("whiteboard.color_palettes.modal.set_default")})]})]})]})}let L=(0,N.Y3)(function(e){return(0,n.jsx)(p.X,{label:"ManageColorPalettesModal",children:(0,n.jsx)(S,{...e})})},"ManageColorPalettesModal")},173559:function(e,t,i){i.d(t,{Z:()=>a});var n=i(750357);let a=(0,i(853505).memo)(function(e){return(0,n.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,n.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M10 5a.5.5 0 0 0 0 1h1.5v1.02a6 6 0 1 0 5.875 3.312l.271-.271a1.5 1.5 0 0 0 0-2.122l-.585-.585a1.5 1.5 0 0 0-2.122 0l-.27.27a6 6 0 0 0-2.169-.603V6H14a.5.5 0 0 0 0-1zm5.547 3.16c.494.363.93.8 1.293 1.293l.1-.1a.5.5 0 0 0 0-.707l-.586-.585a.5.5 0 0 0-.708 0zM12 8a5 5 0 1 0 0 10 5 5 0 0 0 0-10m.5 1.5a.5.5 0 0 0-1 0v2.634a1 1 0 1 0 1 0z",clipRule:"evenodd"})})})}}]);

//# debugId=2c985a6a-1fc0-5d68-bd31-f159317c7135

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/a2dcfc8bdfefc2aec588364f5a7daa363b0306da/3806-f9af071dbca0c431.min.js.map