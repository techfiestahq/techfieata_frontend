"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="a48e0043-0ee9-5a90-8c8e-4b544fa9ae10")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([["5052"],{370452:function(e,t,n){n.d(t,{T:()=>r});let r="https://go/figmascope-docs"},92472:function(e,t,n){n.d(t,{$Q:()=>a,kI:()=>i,x:()=>l});var r=n(750357),s=n(491420);function l(){return(0,r.jsx)(a,{children:(0,r.jsx)("p",{children:"Reading file..."})})}function i({error:e}){let t="Oops! Something went wrong";return"string"==typeof e?t=e:e instanceof Error&&(t=e.message,console.error(e)),(0,r.jsx)(a,{children:(0,r.jsx)("p",{style:s.sx.colorTextOndanger.colorBgDanger.p16.font20.maxW400.$,children:t})})}function a({children:e}){return(0,r.jsx)("div",{style:s.sx.fillPositionedContainer.flex.itemsCenter.justifyCenter.flexColumn.lh1_5Lines.font16.$,children:e})}},407690:function(e,t,n){n.d(t,{A:()=>tx});var r=n(750357),s=n(853505),l=n(258873),i=n(363240),a=n(444947),o=n(962626),c=n(424969),d=n(203570),u=n(491420),h=n(899140),f=n(72615),p=n(40540),x=n(681768),m=n(845277),g=n(272380),j=n(106502);let b=(0,i.cn)(e=>{let t=e(m.E8);return"fullscreen"===t.view?`/api/file/scenegraph_validations/${t.fileKey}`:(0,g.i)(t)&&t.urlParams?.type==="server_file"?`/api/admin/scenegraph_validations/${t.urlParams.key}`:null}),v=(0,i.cn)(e=>null!=e(b)),k=(()=>{let e=(0,i.cn)((0,p.AW)());return(0,i.cn)(t=>t(e),async(t,n)=>{let r;if(t(e).status===d.Q.LOADING)return;let s=t(b);if(s){n(e,(0,p.RN)());try{r=await y(s)}catch(t){n(e,(0,p.SA)(t));return}n(e,(0,p.r7)(r))}})})();async function y(e){let t=await (0,x._e)(e),n=new j.k;for(let e of t.data.meta.data.results.violations)if("always-fail-for-testing"!==e.name)for(let t of e.instances)n.add(t.guid,t.message);return n}var C=n(697466),S=n(872965),I=n(92472),w=n(983051),N=n(519226),D=n(527986),E=n(641857),T=n(685059),_=n(910203),M=n.n(_),P=n(661193),B=n(864197),A=n(705783);let O=(0,S.D2)("bookmarkSettings",{bookmarks:{}}),$=(0,i.cn)(e=>{let t=e(O),n=e(f.Pm).id;return new Set((t.bookmarks[n]??[]).map(e=>e.id))});function F(){let[e,t]=(0,i.KO)(O),n=(0,i.Dv)(f.Pm).id,r=s.useCallback(r=>{t({...e,bookmarks:{...e.bookmarks,[n]:r(e.bookmarks[n]||[])}})},[e,n,t]),l=s.useCallback((e,t)=>{r(n=>[...n,{id:e,name:t}])},[r]),a=s.useCallback(e=>{r(t=>t.filter((t,n)=>n!==e))},[r]),o=s.useCallback((e,t)=>{r(n=>n.map((n,r)=>r===e?{...n,name:t}:n))},[r]),c=s.useCallback((e,t)=>{r(n=>n.map((n,r)=>r===e?{...n,id:A.ue.fromString(t)}:n))},[r]),d=s.useCallback(e=>{r(t=>{if(e>=t.length-1)return t;let n=t.slice(),[r]=n.splice(e,1);return n.splice(e+1,0,r),n})},[r]);return{addBookmark:l,deleteBookmark:a,moveBookmarkDown:d,moveBookmarkUp:s.useCallback(e=>{r(t=>{if(e<=0)return t;let n=t.slice(),[r]=n.splice(e,1);return n.splice(e-1,0,r),n})},[r]),renameBookmark:o,updateBookmarkId:c,bookmarks:s.useMemo(()=>e.bookmarks[n]||[],[e,n])}}var R=n(723796);function L(e,t,n){return[...e.getObject(n)?.mapDescendants(e=>e.id)??[],...t?.getObject(n)?.mapDescendants(e=>e.id)??[]]}let G=(0,i.oH)((0,i.cn)({}),(e,t,n)=>{let r=n(f.Pm),s=n(f.p2);switch(t.type){case"toggleExpanded":return(0,R.Kt)(e,t.objectId,t.toggleSubtree?L(r,s,t.objectId):[]);case"expandAncestors":var l;return(0,R.wo)(e,(l=t.objectId,[...r.getObject(l)?.mapAncestors(e=>e.id)??[],...s?.getObject(l)?.mapAncestors(e=>e.id)??[]]),!0);case"expandDescendants":return(0,R.wo)(e,[t.objectId,...L(r,s,t.objectId)],!0);case"collapseDescendants":return(0,R.v)(e,[t.objectId,...L(r,s,t.objectId)])}});var K=n(870102),H=n(612661),z=n(574090);let W=(0,i.cn)({status:"initial"}),Q=(0,i.cn)(0),U=(0,i.cn)(!1),Z=(0,i.cn)(e=>{if(e(U)){let t=e(Q);return`Indexing search results (this may take a moment)... [${t}/???]`}return null}),V=(0,S.D2)("searchMode",S.d5.Search),J=(0,i.cn)(e=>{let t=e(W),n=e(f.Pm),r=e(C.gJ);return"initial"===t.status?r.map(e=>n.getObject(e)).filter(H.lm).map(e=>({object:e,matches:[]})).reverse():"results"in t&&t.results.length>0?t.results:null}),X=(0,i.cn)(e=>{let t=e(W);if("searching"===t.status&&0===t.results.length){let t=["Searching..."],n=e(Z);return n&&t.push(n),t}if("success"===t.status&&0===t.results.length){let t=["No results found."],n=e(f.Pm);return n instanceof z.Fu&&t.push("Some content may be unavailable because of incremental loading"),"hide"===n.sensitiveTextPolicy&&t.push("Searching text fields is limited beacuse text redaction has been applied."),t}return"error"===t.status?["Error searching:",String(t.error)]:null}),Y=(0,i.cn)(e=>{if(e(V)!==S.d5.Filter)return null;let t=e(W);return"results"in t?t.results.map(e=>e.object):null}),q=(0,i.cn)(e=>{if(e(V)!==S.d5.Filter)return null;let t=e(X);return t?t.join(" "):null}),ee=(0,S.D2)("sortOrder",S.Mf.Position),et=(0,i.cn)(e=>{let t=[S.Mf.Position,S.Mf.Name,S.Mf.NodeId];return e(f.Pm).rootObjects[0]?.displayProperties.memoryFraction!=null&&t.push(S.Mf.Memory),t.sort(),t}),en=(0,i.cn)(e=>{switch(e(ee)){case S.Mf.Position:return es;case S.Mf.Name:return er;case S.Mf.Memory:return ei;case S.Mf.NodeId:return el}});function er(e,t){return e.displayProperties.name.localeCompare(t.displayProperties.name)}function es(e,t){let[n,r]=ea(e,t);if(n&&r){let e=n.parentIndex?.position,t=r.parentIndex?.position;if(null==e&&null==t)return 0;if(null==t)return 1;if(null==e)return -1;else if(e<t)return -1;else if(e>t)return 1}return er(e,t)}function el(e,t){let[n,r]=ea(e,t);if(n&&r){let{sessionID:e,localID:t}=n.guid??{localID:-1,sessionID:-1},{sessionID:s,localID:l}=r.guid??{localID:-1,sessionID:-1};return e-s||t-l}return es(e,t)}function ei(e,t){return(t.displayProperties.memoryFraction??0)-(e.displayProperties.memoryFraction??0)||es(e,t)}function ea(e,t){return"nodeChange"in e&&"nodeChange"in t?[e.nodeChange,t.nodeChange]:[null,null]}var eo=n(464358),ec=n(911081),ed=n(56829),eu=n(879370),eh=n(590914),ef=n(396837),ep=n(225562);let ex=eu.Lt,em=eu.Wx,eg=eu.Z0;function ej({contextMenuData:{objectId:e,position:t},onClose:n}){let[l,a]=s.useState(0),o=t.left,c=t.top+l>window.innerHeight?t.top-l:t.top,{canSelectInApp:d,selectInApp:p}=s.useContext(C.pq),x=s.useRef(null);(0,ed.X3)(x,n);let m=(0,i.Dv)(f.Pm).getObject(e),g=m instanceof ep.o?m:null,j=m instanceof ef.S?m:null,[b,v]=(0,i.KO)(h.km),k=(0,i.b9)(G);if(null==m)return null;let y=e=>()=>{e(),n()},S=m.children.length>0,I=(()=>{if(d?.(m))return y(()=>p(m))})(),w=e=>y(()=>E.iTB.triggerAction(e,{guid:m.id})),N=b?.object.id===m.id;return(0,r.jsx)(ex,{style:{...u.sx.fixed.$,left:o,top:c},dropdownRef:e=>{e&&a(e.clientHeight)},children:(0,r.jsxs)("div",{ref:x,children:[I&&(0,r.jsx)(em,{onClick:I,children:"Jump to node"}),S&&(0,r.jsx)(em,{onClick:y(()=>k({type:"expandDescendants",objectId:e})),children:"Expand descendants"}),S&&(0,r.jsx)(em,{onClick:y(()=>k({type:"collapseDescendants",objectId:e})),children:"Collapse descendants"}),(I||S)&&(0,r.jsx)(eg,{}),N&&(0,r.jsx)(em,{onClick:y(()=>v({type:"clear"})),children:"Stop diffing against this node"}),(!N||b?.type!==h.RT.Layer)&&(0,r.jsx)(em,{onClick:y(()=>v({type:"start",diffType:h.RT.Layer,id:e})),children:"Layer diff against this node"}),(!N||b?.type!==h.RT.Tree)&&(0,r.jsx)(em,{onClick:y(()=>v({type:"start",diffType:h.RT.Tree,id:e})),children:"Tree diff against this node"}),g&&(0,r.jsx)(eg,{}),g&&(0,r.jsx)(em,{onClick:y(()=>{let e=JSON.stringify(g.nodeChange,null,2);navigator.clipboard.writeText(e)}),children:"Copy NodeChange JSON"}),j&&"DOCUMENT"!==j.type&&"CANVAS"!==j.type&&(0,r.jsx)(em,{onClick:w("debug-print-as-test-code"),children:(0,eh.tx)("fullscreen_actions.debug-print-as-test-code")}),j&&"VECTOR"===j.type&&(0,r.jsx)(em,{onClick:w("debug-print-vector-network-as-test-code"),children:(0,eh.tx)("fullscreen_actions.debug-print-vector-network-as-test-code")})]})})}var eb=n(886240);let ev=s.memo(function({diffType:e,id:t,primaryId:n,secondaryId:l,leftBadges:i,indent:a,index:o,isExpanded:c,isLeaf:d,isSelected:u,isSelectedSecondary:h,memoryFraction:f,rightBadges:p,name:x,style:m,select:g,toggle:j,showContextMenu:b}){let v=s.useCallback(e=>{e.preventDefault(),b({objectId:t,position:{left:e.clientX,top:e.clientY}})},[t,b]);return(0,r.jsxs)(eb.a,{changeType:e,indent:a,isExpanded:c,isLeaf:d,isSelected:u,isSelectedSecondary:h,keyboardNavigationPath:[o],onContextMenu:v,onMouseEnter:()=>{E.O$1&&E.O$1.editorState().figmaScopeHighlightedNode.set(t)},onMouseLeave:()=>{E.O$1&&E.O$1.editorState().figmaScopeHighlightedNode.set("")},select:()=>g(t),style:m,toggleExpanded:e=>j(t,e),children:[(0,r.jsx)(eo.NY,{badges:i}),(0,r.jsx)(ec.Be,{id:n}),l&&(0,r.jsx)(ec.Be,{id:l,secondary:!0}),(0,r.jsx)("div",{title:x,className:P.B.ellipsis.noWrap.overflowHidden.$,children:x}),(0,r.jsx)(B.m,{}),(0,r.jsx)(eo.NY,{badges:p}),null!=f&&(0,r.jsxs)("span",{className:P.B.colorTextSecondary.$,title:"Node memory usage",children:[(100*f).toFixed(3),"%"]})]})});function ek({style:e,data:{displayedObjects:t,selectedId:n,selectedIds:s,...l},index:i}){let a=t[i],o=(0,T.SH)(e);return(0,r.jsx)(ev,{...a,...l,isSelected:n===a.id,isSelectedSecondary:!!a&&s.includes(a.id),style:o,index:i})}let ey=[];function eC({appSelection:e}){let t=(0,i.Dv)(eS),[n,l]=(0,i.KO)(C.tz),a=(0,T.vE)(()=>e?.guids??ey,[e?.guids]),[o,c]=s.useState(null),d=s.useRef(null);s.useEffect(()=>{let e=t.findIndex(e=>e.id===n);e>=0&&d.current?.scrollToItem(e,"smart")},[t,n]);let u=(0,i.b9)(G);s.useEffect(()=>{u({type:"expandAncestors",objectId:n})},[u,n]);let h=s.useCallback((e,t)=>{u({type:"toggleExpanded",objectId:e,toggleSubtree:t})},[u]),f=(0,i.Dv)(q);return 0===t.length?(0,r.jsx)("div",{children:f??"Empty Scene"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(w.Z,{disableWidth:!0,children:({height:e})=>(0,r.jsx)(N.t7,{itemSize:18,itemCount:t.length,height:e,ref:d,itemData:{displayedObjects:t,selectedId:n,selectedIds:a,select:l,toggle:h,showContextMenu:c},width:"100%",children:ek})}),o&&(0,r.jsx)(ej,{contextMenuData:o,onClose:()=>{c(null)}})]})}let eS=(0,i.cn)(e=>{let t=e($),n=e(f.Pm);return(e(eI)??e(ew)).map(e=>({...e,rightBadges:[...e.rightBadges,...t.has(e.id)?[{type:"bookmark",value:"Bookmarked"}]:[],...n.getAdditionalBadges?.(e.id)||[]]}))}),eI=(0,i.cn)(e=>{let t=e(Y);return t?t.map(e=>({...e.displayProperties,diffType:void 0,id:e.id,indent:0,isExpanded:!1,isLeaf:!0})):null}),ew=(0,i.cn)(e=>{let t=e(f.Pm).rootObjects,n=e(h.jR),r=e(G),s=e(en),l=(()=>{switch(n.type){case h.RT.Tree:return[n.object];case h.RT.Full:return n.resource.rootObjects;default:return[]}})(),i={sortFn:s,expandedIds:r};return M()(t,e=>{if(!e)return[];if(0===l.length)return eN(e,0,i);let t=eE(e,l);return t?eD(e,t,0,i):function e(t,n,r,s){let l=t.id,i=t.children,a=0===i.length,o=!!s.expandedIds[l],c=!1,d=M()(i,t=>{let l=(()=>{let l=eE(t,n);if(l)return eD(t,l,r+1,s);let i=n.filter(e=>e.someAncestor(e=>e.id===t.id,{includeSelf:!0}));return i.length>0?e(t,i,r+1,s):eN(t,r+1,s)})();return c=c||l[0]?.diffType!=null,l}),u={...t.displayProperties,diffType:c?"CHILD_MODIFIED":void 0,id:l,indent:r,isExpanded:o,isLeaf:a};return o?[u,...d]:[u]}(e,l,0,i)})});function eN(e,t,n){let r=e.id,s=e.children,l=0===s.length,i=!!n.expandedIds[r],a={...e.displayProperties,diffType:void 0,id:r,indent:t,isExpanded:i,isLeaf:l};return i?[a,...M()(eT(s,n.sortFn),e=>eN(e,t+1,n))]:[a]}function eD(e,t,n,r){let s=e??t;if(!s)throw Error("Diffing two nothings");if(e&&t&&e.id!==t.id)throw Error("Diffing nodes with mismatched keys");let l=s.id,i=eT(e?.children??[],r.sortFn),a=eT(t?.children??[],r.sortFn),o=(0,D.eG)(i,a,e=>e.id),c=!1,d=M()(o,({left:e,right:t})=>{let s=eD(e,t,n+1,r);return c=c||s[0]?.diffType!=null,s}),u=(0,h.iB)(e,t,c),f=e?.displayProperties.name,p=t?.displayProperties.name,x=null!=f&&null!=p&&f!==p?`${f} <=> ${p}`:s.displayProperties.name,m=!!r.expandedIds[l],g={...s.displayProperties,diffType:u,id:l,indent:n,isExpanded:m,isLeaf:0===o.length,name:x};return m?[g,...d]:[g]}function eE(e,t){return t.find(t=>t.id===e.id)}function eT(e,t){return e.slice().sort(t)}var e_=n(211839),eM=n(410802),eP=n(535612);n(607906);var eB=n(408949),eA=n(317429),eO=n(282906),e$=n(244465),eF=n(682289),eR=n(473550),eL=n(172592),eG=n(369849),eK=n(25733),eH=n(1327);function ez(e){let{bookmarks:t,deleteBookmark:n,moveBookmarkDown:l,moveBookmarkUp:i,renameBookmark:a,updateBookmarkId:o}=F();return(0,r.jsx)(eB.fC,{defaultPosition:{x:window.innerWidth/2,y:window.innerHeight/2},onClose:e.onClose,width:400,children:(0,r.jsxs)(eA.AU,{children:[(0,r.jsx)(eA.h4,{children:(0,r.jsx)(eA.Dx,{children:"FigmaScope Bookmarks"})}),(0,r.jsx)(eA.uT,{children:(0,r.jsxs)(eO.fC,{...{className:"xrvj5dj x1nfngrj"},children:[0===t.length&&(0,r.jsx)("div",{className:"x6s0dn4 x78zum5 xpyat2d xl56j7k",children:"No bookmarks"}),t.length>0&&(0,r.jsxs)(e$.X2,{...{className:"xrvj5dj xuhvigx xg2d0mh"},children:[(0,r.jsx)(eF.bL,{children:"Name"}),(0,r.jsx)(eF.bL,{children:"ID"})]}),t.map((e,c)=>(0,s.createElement)(e$.X2,{className:"xrvj5dj xuhvigx xg2d0mh",key:c},(0,r.jsx)(eF.bL,{children:(0,r.jsx)(eR.I,{id:`edit-bookmark-name-${c}`,value:e.name,onChange:e=>a(c,e)})}),(0,r.jsx)(eF.bL,{children:(0,r.jsx)(eR.I,{id:`edit-bookmark-id-${c}`,value:e.id,onChange:e=>o(c,e)})}),(0,r.jsx)(eF.bL,{children:(0,r.jsxs)(eL.h,{"aria-label":`Bookmark actions for ${e.name}`,children:[(0,r.jsx)(eM.h,{"aria-label":"Delete bookmark",onClick:()=>n(c),children:(0,r.jsx)(eG.n,{})}),(0,r.jsx)(eM.h,{"aria-label":"Move bookmark up",disabled:0===c,onClick:()=>i(c),children:(0,r.jsx)(eK.g,{})}),(0,r.jsx)(eM.h,{"aria-label":"Move bookmark down",disabled:c===t.length-1,onClick:()=>l(c),children:(0,r.jsx)(eH.T,{})})]})})))]})})]})})}function eW(){let[e,t]=(0,i.KO)(C.tz),n=(0,i.Dv)(C.g_),{getTriggerProps:l,manager:a}=e_.H9(),{addBookmark:o,bookmarks:c}=F(),[d,u]=s.useState(!1);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(e_.fC,{manager:a,children:[(0,r.jsx)("div",{...{className:"xrybvsa"},children:(0,r.jsx)(eM.h,{...l(),"aria-label":"bookmarks",children:(0,r.jsx)(eP.N,{})})}),(0,r.jsxs)(e_.W2,{children:[(0,r.jsxs)(e_.ZA,{title:(0,r.jsx)(e_.Tv,{children:"Bookmark settings"}),children:[(0,r.jsx)(e_.ck,{onClick:()=>{let t=n?.displayProperties.name??"Bookmark";o(e,`${t} - ${e}`)},children:"Add bookmark"}),(0,r.jsx)(e_.ck,{onClick:()=>{u(!0)},children:"Manage bookmarks"})]}),c.length?(0,r.jsx)(e_.ZA,{title:(0,r.jsx)(e_.Tv,{children:"Bookmark list"}),children:c.map((e,n)=>(0,r.jsx)(e_.ck,{onClick:()=>{t(e.id)},children:e.name},n))}):null]})]}),d&&(0,r.jsx)(ez,{onClose:()=>u(!1)})]})}var eQ=n(53022),eU=n.n(eQ),eZ=n(456252),eV=n(280585);function eJ({searchRef:e}){let t=(0,i.b9)(C.tz),n=(0,i.Dv)(J),l=(0,i.Dv)(X),[a,o]=s.useState(!1),c=(0,i.Dv)(V)!==S.d5.Filter&&a,d=s.useRef(null);(0,ed.X3)(d,()=>o(!1));let u=s.useCallback(e=>{o(!1),t(e.object.id)},[o,t]);return(0,r.jsxs)(eV.Sg,{className:P.B.flex1.$,ref:d,allowVim:!0,children:[(0,r.jsx)(eX,{searchRef:e,setShowSearchResults:o}),c&&(n?(0,r.jsx)(eq,{searchResults:n,selectResult:u}):l?(0,r.jsx)(e0,{text:l}):null)]})}function eX({searchRef:e,setShowSearchResults:t}){let n=(0,i.Dv)(V),l=function(){let e=(0,i.Dv)(f.Pm),t=(0,i.b9)(W),n=(0,i.b9)(Q),r=(0,i.b9)(U),l=s.useRef(0),a=s.useMemo(()=>(0,K.D)(s=>{let i=++l.current;r(!0);let a=new TaskController({priority:"user-visible"});scheduler.postTask(()=>r(!0),{signal:a.signal,delay:300}).catch(()=>{});let o=e.getObject(s);o&&t({status:"searching",results:[{object:o,matches:[{value:s,property:"id",isExact:!0}]}]}),e.getSearch(n).then(e=>e.searchWithText(s)).then(e=>{a.abort(),i===l.current&&t({status:"success",results:e})}).catch(e=>{console.error(e),a.abort(),i===l.current&&t({status:"error",error:e})})},200),[e,n,t,r]);return s.useCallback(e=>0===e.length?t({status:"initial"}):a(e),[a,t])}(),{setKeyboardNavigationElement:a}=(0,eV.Jd)({path:[0,0],id:"input"});return(0,r.jsx)("input",{ref:t=>{a(t),e.current=t},type:"text",placeholder:n,className:"search_bar--searchBar--UMQA-",onChange:e=>l(e.target.value),onFocus:()=>t(!0)})}function eY({children:e}){return(0,r.jsx)("div",{className:P.B.absolute.zIndexModal.colorBg.b1.colorBorder.mt2.overflowAuto.$,style:{maxHeight:450,minWidth:500,boxShadow:"0px 2px 14px var(--color-shadow, rgba(0, 0, 0, 0.15))"},children:e})}function eq({searchResults:e,selectResult:t}){return(0,r.jsx)(eY,{children:e.map((e,n)=>(0,r.jsx)(e1,{result:e,index:n,onClick:()=>t(e)},e.object.id))})}function e0({text:e}){return(0,r.jsx)(eY,{children:(Array.isArray(e)?e:[e]).map((e,t)=>(0,r.jsx)("div",{className:P.B.colorBg.colorTextSecondary.px8.py4.$,children:e},t))})}function e1({result:e,index:t,onClick:n}){let{object:l,matches:i}=e,{displayProperties:a}=l,{setKeyboardNavigationElement:o,keyboardNavigationItem:c,isFauxFocused:d}=(0,eV.Jd)({path:[1,t],id:l.id});return s.useEffect(()=>{c&&0===t&&c.fauxFocus()},[c,t]),(0,r.jsx)("button",{ref:o,className:eU()(P.B.block.wFull.px4.py8.colorText.flex.itemsCenter.alignLeft.$,"search_bar--searchResult--8iGr1",d&&"search_bar--fauxFocus--6i7Gb"),onClick:n,children:(0,r.jsxs)(B.j,{spacing:4,children:[(0,r.jsx)(eo.NY,{badges:a.leftBadges}),(0,r.jsx)(ec.Be,{id:l.displayProperties.primaryId}),(0,r.jsx)(eZ.C,{className:P.B.overflowHidden.$,text:a.name}),(0,r.jsx)(B.m,{}),i.filter(({property:e})=>!["id","guid","name","type","phase"].includes(e)).map(({property:e,value:t},n)=>(0,r.jsxs)(B.j,{spacing:4,width:"hug-contents",children:[(0,r.jsxs)("div",{children:[e,":"]}),(0,r.jsx)("div",{children:t})]},n))]})})}var e5=n(240473);function e2({children:e}){return(0,r.jsx)("div",{className:P.B.colorBorder.px8.py4.bb1.bSolid.$,children:(0,r.jsx)(B.j,{children:e})})}function e4(e){let t={className:"toolbar_components--iconButton--h3x8J",children:(0,r.jsx)(e5.n,{svg:e.svg}),title:e.label,"aria-label":e.label};return"href"in e?(0,r.jsx)("a",{...t,href:e.href,target:"blank"}):(0,r.jsx)("button",{...t,onClick:e.onClick,disabled:e.disabled})}var e7=n(632059),e9=n(261051);function e8({searchRef:e}){let[t,n]=(0,i.KO)(C.md),[l,o]=(0,i.KO)(C.L3),c=!!s.useContext(C.pq).selectInApp,[d,u]=(0,i.KO)(V),[h,f]=(0,i.KO)(C.E4),[p,x]=(0,i.KO)(ee),m=(0,i.Dv)(et);return(0,r.jsxs)(e2,{children:[(0,r.jsx)(eJ,{searchRef:e}),(0,r.jsxs)("select",{name:"filter-or-search",title:"Determines whether the text box searches or filters",onChange:e=>{u(e.target.value)},defaultValue:d,children:[(0,r.jsx)("option",{value:S.d5.Search,children:"Search"}),(0,r.jsx)("option",{value:S.d5.Filter,children:"Filter"})]}),(0,r.jsx)("select",{name:"sort",title:"Sets the left panel sort order",onChange:e=>{let t=e.target.value;a.RQ.trackDefinedEvent("figmascope.sort_order_change",{order:function(e){switch(e){case S.Mf.Position:return"position";case S.Mf.Name:return"name";case S.Mf.Memory:return"memory";case S.Mf.NodeId:return"node_id"}}(t)}),x(t)},defaultValue:p,children:m.map(e=>(0,r.jsxs)("option",{value:e,children:["Sort by ",e]},e))}),c&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("input",{name:"follow-selection",type:"checkbox",checked:h,onChange:e=>f(e.target.checked)}),(0,r.jsx)("label",{htmlFor:"follow-selection",children:"Follow"})]}),(0,r.jsx)(e4,{label:"Select Previous",onClick:()=>{n(),a.RQ.trackDefinedEvent("figmascope.select_prev_next",{direction:"prev",source:"button"})},disabled:!t,svg:e7.Z}),(0,r.jsx)(e4,{label:"Select Next",onClick:()=>{o(),a.RQ.trackDefinedEvent("figmascope.select_prev_next",{direction:"next",source:"button"})},disabled:!l,svg:e9.Z}),(0,r.jsx)(eW,{})]})}var e3=n(503812),e6=n(18715),te=n(739842),tt=n(370452),tn=n(185063),tr=n(408600),ts=n(956555),tl=n(384787);function ti({selectedObject:e,diffObject:t,onClose:n}){let s=(0,i.Dv)(v),[l,a]=(0,i.KO)(h.km);return(0,r.jsxs)(e2,{children:[e?l&&t?(0,r.jsx)(tc,{selectedObject:e,diffObject:t,diffState:l,setDiffState:a}):(0,r.jsx)(to,{object:e}):t?(0,r.jsx)(to,{object:t}):(0,r.jsx)(B.m,{}),s&&(0,r.jsx)(td,{}),(0,r.jsx)(e4,{label:"Help",href:tt.T,svg:tn.Z}),n&&(0,r.jsx)(e4,{label:"Close FigmaScope",onClick:n,svg:tl.Z})]})}let ta=P.B.flex1.ml10.my4.$;function to({object:e}){return(0,r.jsx)("div",{className:ta,children:(0,r.jsx)("span",{className:P.B.fontSemiBold.$,children:e.displayProperties.longName})})}function tc({selectedObject:e,diffObject:t,diffState:n,setDiffState:s}){let l=(0,i.b9)(C.tz);return(0,r.jsxs)("div",{className:P.B.flex1.ml10.my4.$,children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:P.B.colorTextSecondary.$,children:"Diffing "}),(0,r.jsx)("span",{className:P.B.fontSemiBold.$,children:e.displayProperties.longName}),(0,r.jsx)("span",{className:P.B.colorTextSecondary.$,children:" against "}),(0,r.jsx)("span",{className:P.B.fontSemiBold.$,children:t.displayProperties.longName})]}),n&&(0,r.jsx)("div",{className:P.B.colorTextSecondary.mt8.$,children:(0,r.jsxs)(B.j,{spacing:8,width:"hug-contents",height:"hug-contents",verticalAlignItems:"start",children:[(0,r.jsxs)("span",{children:["Snapshot of"," ",(0,r.jsx)(te.UU,{onClick:()=>l(n.object.id),className:P.B.colorTextFigjam.fontSemiBold.$,trusted:!0,children:n.object.displayProperties.name}),n.type===h.RT.Tree&&" and full subtree"," was taken at"," ",n.time.toLocaleTimeString("en-US")]}),(0,r.jsx)(te.UU,{onClick:()=>s({type:"refresh"}),className:P.B.colorTextDesign.$,trusted:!0,children:"Refresh"}),(0,r.jsx)(te.UU,{onClick:()=>s({type:"clear"}),className:P.B.colorTextDanger.$,trusted:!0,children:"Finish"})]})})]})}function td(){let[e,t]=(0,i.KO)(k),n=e.status===d.Q.LOADING;return s.useEffect(()=>{t()},[t]),(0,r.jsx)(e4,{label:n?"Fetching scene graph validation failures":"Refetch scenegraph validation failures",onClick:t,svg:n?tr.Z:ts.Z})}var tu=n(225094);function th({children:e}){return(0,r.jsx)("div",{className:P.B.hFull.$,children:(0,r.jsxs)(B.j,{direction:"vertical",width:"fill-parent",height:"fill-parent",padding:0,spacing:0,children:[(0,r.jsx)(tf,{}),e]})})}function tf(){let{name:e,metadata:t}=(0,i.Dv)(f.Pm);return(0,r.jsxs)(B.j,{direction:"horizontal",width:"fill-parent",height:32,padding:8,spacing:32,backgroundColor:"toolbar",children:[e&&(0,r.jsx)(tu.x,{fontWeight:"bold",color:"toolbar",children:e}),t&&Object.entries(t).map(([e,t])=>t&&(0,r.jsxs)("span",{children:[(0,r.jsxs)(tu.x,{color:"toolbar-secondary",children:[e,": "]}),(0,r.jsx)(tu.x,{color:"toolbar",fontFamily:"monospace",fontWeight:"bold",children:t})]},e))]})}var tp=n(221325);let tx=s.memo(function({embedded:e=!1,emptyStateContent:t,onClose:n,appSelection:s,setAppSelection:l}){let a=(0,i.Dv)(f.O7);switch(a.status){case d.Q.INIT:return t??(0,r.jsx)(I.x,{});case d.Q.LOADING:return(0,r.jsx)(I.x,{});case d.Q.FAILURE:return(0,r.jsx)(I.kI,{error:a.error});case d.Q.SUCCESS:}if(0===a.value.primaryResource.rootObjects.length)return(0,r.jsx)(I.kI,{error:"No root objects found. This is likely a bug - please report in #figmascope."});let o=(0,r.jsx)(tm,{appSelection:s,setAppSelection:l,onClose:n});return e?o:(0,r.jsx)(th,{children:o})});function tm({onClose:e,appSelection:t,setAppSelection:n}){let p=s.useRef(null),x=s.useRef(null),{windowInnerWidth:m}=(0,o.i)(),[g,j]=(0,i.KO)(tg),[b,v]=(0,i.KO)(tj),[y,S]=(0,l.c)({onDrag(e){let t=e.clientX/m;j(`${(100*t).toFixed(2)}%`)}}),[I,w]=(0,l.c)({onDrag(e){let t=x.current;if(!t)return;let n=(e.clientX-t.getBoundingClientRect().left)/t.clientWidth;v(`${(100*n).toFixed(2)}%`)}}),N=(0,i.b9)(C.md),D=(0,i.b9)(C.L3),E=s.useCallback(e=>{let t=p.current;document.activeElement!==t&&(e.keyCode===c.sr.FORWARD_SLASH&&t?(t.focus(),e.preventDefault()):e.keyCode===c.sr.BRACKET_LEFT?(a.RQ.trackDefinedEvent("figmascope.select_prev_next",{direction:"prev",source:"keyboard"}),N()):e.keyCode===c.sr.BRACKET_RIGHT&&(a.RQ.trackDefinedEvent("figmascope.select_prev_next",{direction:"next",source:"keyboard"}),D()))},[N,D]),T=(0,i.Dv)(f.Pm);window.figmaScope=T,window.figmaScopeScene=T;let[_,M]=(0,i.KO)(k);_.status===d.Q.SUCCESS&&T?.setSceneGraphValidationInfo?.(_.value),(0,s.useEffect)(()=>{M()},[M]);let P=(0,i.Dv)(C.tz),B=(0,i.Dv)(C.g_),A=(0,i.Dv)(h.aS);return(0,r.jsx)(C.gM,{appSelection:t,setAppSelection:n,children:(0,r.jsxs)("div",{className:tp.Jz,style:u.sx.if(y||I,{cursor:"ew-resize"}).$,onKeyDown:E,children:[(0,r.jsxs)("div",{className:tp.CH,style:{width:g},children:[(0,r.jsx)(e8,{searchRef:p}),(0,r.jsxs)(e3.W,{className:tp.W0,children:[(0,r.jsx)("div",{...S({style:{position:"absolute",top:0,bottom:0,right:"-3px",width:"5px",gridArea:"center",cursor:"ew-resize",zIndex:9}})}),(0,r.jsx)(eC,{appSelection:t})]})]}),(0,r.jsxs)("div",{className:tp.Hs,children:[(0,r.jsx)(ti,{selectedObject:B,diffObject:A,onClose:e}),(B||A)&&(0,r.jsxs)("div",{className:tp.m8,ref:x,children:[(0,r.jsxs)(e3.W,{className:tp.to,style:{width:b},children:[(0,r.jsx)("div",{...w({style:{position:"absolute",top:0,bottom:0,right:"-3px",width:"5px",gridArea:"center",cursor:"ew-resize",zIndex:9}})}),(0,r.jsx)(e6.a,{panel:"middle",items:B?.rawProperties,diffItems:A?.rawProperties,extraItems:void 0},P)]}),(0,r.jsx)(e3.W,{className:tp.wB,children:(0,r.jsx)(e6.a,{panel:"right",items:B?.computedProperties,diffItems:A?.computedProperties,extraItems:T.getAdditionalProperties?.(P)},P)})]})]})]})})}let tg=(0,S.D2)("leftPanelWidth","35%"),tj=(0,S.D2)("rightPanelWidth","50%")},835847:function(e,t,n){n.d(t,{Jt:()=>h,Yj:()=>u,od:()=>c,p2:()=>d});var r=n(853505),s=n(883838),l=n(444947),i=n(458780);if(9793==n.j)var a=n(271609);if(9793==n.j)var o=n(478529);function c(e,t){let n=d({overrideCodeLibraryNode:e===s.I$.FIGMAKE?t:null,disabled:e!==s.I$.FIGMAKE}),r=u({codeFileNode:e===s.I$.CODE_IN_SITES?t:null,disabled:e!==s.I$.CODE_IN_SITES}),l=h({codeFileNode:e===s.I$.FIGMAKE_IN_DESIGN?t:null,disabled:e!==s.I$.FIGMAKE_IN_DESIGN});switch(e){case s.I$.FIGMAKE:return n;case s.I$.CODE_IN_SITES:return r;case s.I$.FIGMAKE_IN_DESIGN:return l;default:throw Error(`Unsupported feature type: ${e}`)}}function d({overrideCodeLibraryNode:e,disabled:t}){let{codeLibraryInstance:n}=(0,a.pG)(),c=t?null:void 0!==e?e:n;c&&!i.ZP.location.pathname.startsWith("/make/")&&(console.warn("useMakeChatController used outside of make file"),(0,l.L9)("chat_controller.wrong_file_type",{hookName:"useMakeChatController",expectedFileType:"make",expectedPath:"/make/",currentPath:i.ZP.location.pathname,nodeGuid:c.guid}));let d=(0,o.f3)(c);return(0,o.Gn)(c),r.useMemo(()=>new s.V0({readingSource:d,writingSinks:[d],node:c}),[c,d])}function u({codeFileNode:e,disabled:t}){let n=t?null:e;n&&!i.ZP.location.pathname.startsWith("/site/")&&(console.warn("useSitesChatController used outside of sites file"),(0,l.L9)("chat_controller.wrong_file_type",{hookName:"useSitesChatController",expectedFileType:"sites",expectedPath:"/site/",currentPath:i.ZP.location.pathname,nodeGuid:n.guid}));let a=(0,o.f3)(n);return r.useMemo(()=>new s.V0({readingSource:a,writingSinks:[a],node:n}),[a,n])}function h({codeFileNode:e,disabled:t}){let n=t?null:e;n&&!i.ZP.location.pathname.startsWith("/design/")&&(console.warn("useMakeInDesignChatController used outside of design file"),(0,l.L9)("chat_controller.wrong_file_type",{hookName:"useMakeInDesignChatController",expectedFileType:"design",expectedPath:"/design/",currentPath:i.ZP.location.pathname,nodeGuid:n.guid}));let a=(0,o.f3)(n);return r.useMemo(()=>new s.V0({readingSource:a,writingSinks:[a],node:n}),[a,n])}},478529:function(e,t,n){n.d(t,{Gh:()=>p,Gn:()=>f,f3:()=>u});var r=n(853505),s=n(710162),l=n(363240),i=n(154761),a=n(105519),o=n(479929);let c="null-hash",d=(0,o.o)({hash:c,messages:[]});function u(e){let t=(0,a.OU)((e,t)=>t?.chatMessagesHash??c,e),n=e?.guid||"",[s,o]=(0,l.KO)(d(n)),u=(0,l.oR)(),h=r.useMemo(()=>e&&s.hash!==c,[s.hash,e]);r.useEffect(()=>{e&&t&&t!==s.hash&&o({hash:t,messages:e.chatMessages_DEPRECATED||[],pendingMessages:void 0})},[e,t,s.hash,o,n]);let f=r.useCallback(()=>{let e=u.get(d(n));return e.pendingMessages??e.messages??[]},[u,n]),p=r.useCallback(t=>{if(h&&e){(0,i.K)(()=>e.chatMessages_DEPRECATED=t);let r=u.get(d(n));u.set(d(n),{...r,pendingMessages:t})}},[h,e,u,n]);return r.useMemo(()=>({getMessages:f,setMessages:p}),[f,p])}let h=(0,o.o)({threadId:null,messages:[]});function f(e,t){let[n,s]=(0,l.KO)(h(e?.guid||"")),i=r.useCallback(()=>n.messages,[n.messages]),a=r.useCallback(e=>{s({threadId:n.threadId,messages:e})},[s,n.threadId]);return r.useMemo(()=>({getMessages:i,setMessages:a}),[i,a])}function p(e){let t=e.getMessages();return r.useMemo(()=>(0,s.Ib)(t),[t])}},25733:function(e,t,n){n.d(t,{g:()=>s});var r=n(750357);let s=(0,n(853505).memo)(function(e){return(0,r.jsx)("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",...e,children:(0,r.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",d:"M7.646 6.404a.5.5 0 0 1 .707 0l2.122 2.121a.5.5 0 0 1-.708.707L8 7.465 6.232 9.232a.5.5 0 0 1-.707-.707z"})})})},369849:function(e,t,n){n.d(t,{n:()=>i});var r=n(750357),s=n(853505),l=n(307991);let i=(0,s.memo)(function(e){return(0,l.s)()?(0,r.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,r.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M6.5 7a1 1 0 0 1 1-1h9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1h-.039l-.08 1H17a.5.5 0 0 1 0 1h-.7l-.455 5.62A1.5 1.5 0 0 1 14.35 18h-4.7a1.5 1.5 0 0 1-1.495-1.38L7.7 11H7a.5.5 0 0 1 0-1h.62l-.081-1H7.5a1 1 0 0 1-1-1zm9.494 1h.506V7h-9v1zm-.536 1H8.542l.61 7.54a.5.5 0 0 0 .498.46h4.7a.5.5 0 0 0 .499-.46zM11.5 11.5a.5.5 0 0 0-1 0v3a.5.5 0 0 0 1 0zm2 0a.5.5 0 0 0-1 0v3a.5.5 0 0 0 1 0z",clipRule:"evenodd"})}):(0,r.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,r.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M7 6a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1h.039l.08 1H6.5a.5.5 0 0 0 0 1h.7l.455 5.62A1.5 1.5 0 0 0 9.15 18h4.7a1.5 1.5 0 0 0 1.495-1.38L15.8 11h.7a.5.5 0 0 0 0-1h-.62l.081-1H16a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1zm8.505 2H7V7h9v1zM8.042 9h6.916l-.61 7.54a.5.5 0 0 1-.498.46h-4.7a.5.5 0 0 1-.499-.46zm2.458 2a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-1 0v-3a.5.5 0 0 1 .5-.5m2 0a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-1 0v-3a.5.5 0 0 1 .5-.5",clipRule:"evenodd"})})})},710162:function(e,t,n){n.d(t,{GV:()=>a,Ib:()=>i,ec:()=>o});var r=n(883838),s=n(641857),l=n(895996);function i(e){let t=e?.filter(e=>e.type!==s.Q_5.TOOL_MESSAGE);return t?t.reduce((e,t)=>{let n=t.type===s.Q_5.ASSISTANT_MESSAGE,i=t.toolCalls.length>0,a=0===(0,r.jR)(t.textContent||"").plainText.length;if(n&&i&&a){let n=e[e.length-1];return n?.type===s.Q_5.ASSISTANT_MESSAGE&&(n.toolCalls=l([...n.toolCalls,...t.toolCalls],"toolCallId")),e}return[...e,t]},[]):[]}function a(e){let{hidden:t,errors:n}=e;return!!t&&!!n&&n.length>0}function o(e){let t=e.slice().reverse().find(e=>e.type===s.Q_5.USER_MESSAGE);return t?t.id:null}}}]);

//# debugId=a48e0043-0ee9-5a90-8c8e-4b544fa9ae10

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/4d550986bfda335e9be757928caff1cd7104fb86/5052-8db4caae5987c4e5.min.js.map